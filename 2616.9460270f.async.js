(self.webpackChunkantv_vision=self.webpackChunkantv_vision||[]).push([[2616],{48820:function(e,t){"use strict";t.Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"}},27363:function(e,t){"use strict";t.Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"}},43114:function(e,t){"use strict";t.Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"}},82061:function(e,t,n){"use strict";var r=n(1413),a=n(67294),s=n(47046),i=n(84089),o=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s.Z}))},c=a.forwardRef(o);t.Z=c},30723:function(e,t,n){"use strict";var r=n(1413),a=n(67294),s=n(43114),i=n(84089),o=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s.Z}))},c=a.forwardRef(o);t.Z=c},84512:function(e,t,n){"use strict";n.d(t,{Z:function(){return gd}});var r=n(1413),a=n(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=n(84089),o=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};var c=a.forwardRef(o),l=n(32857),u=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:l.Z}))};var d=a.forwardRef(u),p=n(48820),h=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:p.Z}))};var f=a.forwardRef(h),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},g=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:m}))};var v=a.forwardRef(g),y=n(82061),b=n(30723),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},k=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:_}))};var w=a.forwardRef(k),x=n(87462),E=n(93967),S=n.n(E),I=n(59092);var T=a.createContext({});const z={classNames:{},styles:{},className:"",style:{}};var C=e=>{const t=a.useContext(T);return a.useMemo((()=>({...z,...t[e]})),[t[e]])},A=n(50791);var Z=function(){const{getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r,theme:s}=a.useContext(A.ZP.ConfigContext);return{theme:s,getPrefixCls:e,direction:t,csp:n,iconPrefixCls:r}},$=n(8410);function O(e){return"string"==typeof e}var N=(e,t,n,r)=>{const s=a.useRef(""),[i,o]=a.useState(1),c=t&&O(e);(0,$.Z)((()=>{if(!c&&O(e))o(e.length);else if(O(e)&&O(s.current)&&0!==e.indexOf(s.current)){if(!e||!s.current)return void o(1);const t=function(e,t){let n=0;const r=Math.min(e.length,t.length);for(;n<r&&e[n]===t[n];)n++;return n}(e,s.current);o(0===t?1:t+1)}s.current=e}),[e]),a.useEffect((()=>{if(c&&i<e.length){const e=setTimeout((()=>{o((e=>e+n))}),r);return()=>{clearTimeout(e)}}}),[i,t,e]);return[c?e.slice(0,i):e,c&&i<e.length]};var P=function(e){return a.useMemo((()=>{if(!e)return[!1,0,0,null];let t={step:1,interval:50,suffix:null};return"object"==typeof e&&(t={...t,...e}),[!0,t.step,t.interval,t.suffix]}),[e])};var R=({prefixCls:e})=>a.createElement("span",{className:`${e}-dot`},a.createElement("i",{className:`${e}-dot-item`,key:"item-1"}),a.createElement("i",{className:`${e}-dot-item`,key:"item-2"}),a.createElement("i",{className:`${e}-dot-item`,key:"item-3"})),M=n(11568),j=n(83262),F=n(18270),D=n(43487),L=n(25634);const U=(0,M.jG)(F.Z.defaultAlgorithm),V={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},B=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:a,...s}=t;let i={...r,override:a};return i=(0,L.Z)(i),s&&Object.entries(s).forEach((([e,t])=>{const{theme:n,...r}=t;let a=r;n&&(a=B({...i,...r},{override:r},n)),i[e]=a})),i};function W(){const{token:e,hashed:t,theme:n=U,override:r,cssVar:s}=a.useContext(F.Z._internalContext),[i,o,c]=(0,M.fp)(n,[F.Z.defaultSeed,e],{salt:`1.6.1-${t||""}`,override:r,getComputedToken:B,cssVar:s&&{prefix:s.prefix,key:s.key,unitless:D.NJ,ignore:D.ID,preserve:V}});return[n,c,t?o:"",i,s]}const{genStyleHooks:J,genComponentStyleHook:q,genSubStyleComponent:H}=(0,j.rb)({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=Z();return{iconPrefixCls:t,rootPrefixCls:e()}},useToken:()=>{const[e,t,n,r,a]=W();return{theme:e,realToken:t,hashId:n,token:r,cssVar:a}},useCSP:()=>{const{csp:e}=Z();return e??{}},layer:{name:"antdx",dependencies:["antd"]}}),Y=e=>{const{componentCls:t,paddingSM:n,padding:r}=e;return{[t]:{[`${t}-content`]:{"&-filled,&-outlined,&-shadow":{padding:`${(0,M.bf)(n)} ${(0,M.bf)(r)}`,borderRadius:e.borderRadiusLG},"&-filled":{backgroundColor:e.colorFillContent},"&-outlined":{border:`1px solid ${e.colorBorderSecondary}`},"&-shadow":{boxShadow:e.boxShadowTertiary}}}}},K=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingSM:a,padding:s,calc:i}=e,o=`${t}-content`;return{[t]:{[o]:{"&-round":{borderRadius:{_skip_check_:!0,value:i(n).mul(r).div(2).add(a).equal()},paddingInline:i(s).mul(1.25).equal()}},[`&-start ${o}-corner`]:{borderStartStartRadius:e.borderRadiusXS},[`&-end ${o}-corner`]:{borderStartEndRadius:e.borderRadiusXS}}}};var G=e=>{const{componentCls:t,padding:n}=e;return{[`${t}-list`]:{display:"flex",flexDirection:"column",gap:n,overflowY:"auto","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.colorTextTertiary,borderRadius:e.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${e.colorTextTertiary} transparent`}}}};const X=new M.E4("loadingMove",{"0%":{transform:"translateY(0)"},"10%":{transform:"translateY(4px)"},"20%":{transform:"translateY(0)"},"30%":{transform:"translateY(-4px)"},"40%":{transform:"translateY(0)"}}),Q=new M.E4("cursorBlink",{"0%":{opacity:1},"50%":{opacity:0},"100%":{opacity:1}}),ee=e=>{const{componentCls:t,fontSize:n,lineHeight:r,paddingSM:a,colorText:s,calc:i}=e;return{[t]:{display:"flex",columnGap:a,[`&${t}-end`]:{justifyContent:"end",flexDirection:"row-reverse",[`& ${t}-content-wrapper`]:{alignItems:"flex-end"}},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-typing ${t}-content:last-child::after`]:{content:'"|"',fontWeight:900,userSelect:"none",opacity:1,marginInlineStart:"0.1em",animationName:Q,animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"linear"},[`& ${t}-avatar`]:{display:"inline-flex",justifyContent:"center",alignSelf:"flex-start"},[`& ${t}-header, & ${t}-footer`]:{fontSize:n,lineHeight:r,color:e.colorText},[`& ${t}-header`]:{marginBottom:e.paddingXXS},[`& ${t}-footer`]:{marginTop:a},[`& ${t}-content-wrapper`]:{flex:"auto",display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0,maxWidth:"100%"},[`& ${t}-content`]:{position:"relative",boxSizing:"border-box",minWidth:0,maxWidth:"100%",color:s,fontSize:e.fontSize,lineHeight:e.lineHeight,minHeight:i(a).mul(2).add(i(r).mul(n)).equal(),wordBreak:"break-word",[`& ${t}-dot`]:{position:"relative",height:"100%",display:"flex",alignItems:"center",columnGap:e.marginXS,padding:`0 ${(0,M.bf)(e.paddingXXS)}`,"&-item":{backgroundColor:e.colorPrimary,borderRadius:"100%",width:4,height:4,animationName:X,animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"linear","&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}}}}}};var te=J("Bubble",(e=>{const t=(0,j.IX)(e,{});return[ee(t),G(t),Y(t),K(t)]}),(()=>({})));const ne=a.createContext({}),re=(e,t)=>{const{prefixCls:n,className:r,rootClassName:s,style:i,classNames:o={},styles:c={},avatar:l,placement:u="start",loading:d=!1,loadingRender:p,typing:h,content:f="",messageRender:m,variant:g="filled",shape:v,onTypingComplete:y,header:b,footer:_,_key:k,...w}=e,{onUpdate:E}=a.useContext(ne),T=a.useRef(null);a.useImperativeHandle(t,(()=>({nativeElement:T.current})));const{direction:z,getPrefixCls:A}=Z(),$=A("bubble",n),O=C("bubble"),[M,j,F,D]=P(h),[L,U]=N(f,M,j,F);a.useEffect((()=>{E?.()}),[L]);const V=a.useRef(!1);a.useEffect((()=>{U||d?V.current=!1:V.current||(V.current=!0,y?.())}),[U,d]);const[B,W,J]=te($),q=S()($,s,O.className,r,W,J,`${$}-${u}`,{[`${$}-rtl`]:"rtl"===z,[`${$}-typing`]:U&&!d&&!m&&!D}),H=a.useMemo((()=>a.isValidElement(l)?l:a.createElement(I.Z,l)),[l]),Y=a.useMemo((()=>m?m(L):L),[L,m]),K=e=>"function"==typeof e?e(L,{key:k}):e;let G;G=d?p?p():a.createElement(R,{prefixCls:$}):a.createElement(a.Fragment,null,Y,U&&D);let X=a.createElement("div",{style:{...O.styles.content,...c.content},className:S()(`${$}-content`,`${$}-content-${g}`,v&&`${$}-content-${v}`,O.classNames.content,o.content)},G);return(b||_)&&(X=a.createElement("div",{className:`${$}-content-wrapper`},b&&a.createElement("div",{className:S()(`${$}-header`,O.classNames.header,o.header),style:{...O.styles.header,...c.header}},K(b)),X,_&&a.createElement("div",{className:S()(`${$}-footer`,O.classNames.footer,o.footer),style:{...O.styles.footer,...c.footer}},K(_)))),B(a.createElement("div",(0,x.Z)({style:{...O.style,...i},className:q},w,{ref:T}),l&&a.createElement("div",{style:{...O.styles.avatar,...c.avatar},className:S()(`${$}-avatar`,O.classNames.avatar,o.avatar)},H),X))};var ae=a.forwardRef(re),se=n(56790),ie=n(64217);const oe=({_key:e,...t},n)=>a.createElement(ae,(0,x.Z)({},t,{_key:e,ref:t=>{t?n.current[e]=t:delete n.current?.[e]}})),ce=a.memo(a.forwardRef(oe)),le=(e,t)=>{const{prefixCls:n,rootClassName:r,className:s,items:i,autoScroll:o=!0,roles:c,onScroll:l,...u}=e,d=(0,ie.Z)(u,{attr:!0,aria:!0}),p=a.useRef(null),h=a.useRef({}),{getPrefixCls:f}=Z(),m=f("bubble",n),g=`${m}-list`,[v,y,b]=te(m),[_,k]=a.useState(!1);a.useEffect((()=>(k(!0),()=>{k(!1)})),[]);const w=function(e,t){const n=a.useCallback(((e,n)=>"function"==typeof t?t(e,n):t&&t[e.role]||{}),[t]);return a.useMemo((()=>(e||[]).map(((e,t)=>{const r=e.key??`preset_${t}`;return{...n(e,t),...e,key:r}}))),[e,n])}(i,c),[E,I]=a.useState(!0),[T,z]=a.useState(0);a.useEffect((()=>{o&&p.current&&E&&p.current.scrollTo({top:p.current.scrollHeight})}),[T]),a.useEffect((()=>{if(o){const e=w[w.length-2]?.key,t=h.current[e];if(t){const{nativeElement:e}=t,{top:n,bottom:r}=e.getBoundingClientRect(),{top:a,bottom:s}=p.current.getBoundingClientRect();n<s&&r>a&&(z((e=>e+1)),I(!0))}}}),[w.length]),a.useImperativeHandle(t,(()=>({nativeElement:p.current,scrollTo:({key:e,offset:t,behavior:n="smooth",block:r})=>{if("number"==typeof t)p.current.scrollTo({top:t,behavior:n});else if(void 0!==e){const t=h.current[e];if(t){const a=w.findIndex((t=>t.key===e));I(a===w.length-1),t.nativeElement.scrollIntoView({behavior:n,block:r})}}}})));const C=(0,se.zX)((()=>{o&&z((e=>e+1))})),A=a.useMemo((()=>({onUpdate:C})),[]);return v(a.createElement(ne.Provider,{value:A},a.createElement("div",(0,x.Z)({},d,{className:S()(g,r,s,y,b,{[`${g}-reach-end`]:E}),ref:p,onScroll:e=>{const t=e.target;I(t.scrollHeight-Math.abs(t.scrollTop)-t.clientHeight<=1),l?.(e)}}),w.map((({key:e,...t})=>a.createElement(ce,(0,x.Z)({},t,{key:e,_key:e,ref:h,typing:!!_&&t.typing})))))))};var ue=a.forwardRef(le);ae.List=ue;var de,pe=ae,he=n(83109),fe=n(34452),me=n(69873),ge=n(86923),ve="vercel.ai.error",ye=Symbol.for(ve),be=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[de]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,ve)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};de=ye;var _e=be,ke="AI_APICallError",we=`vercel.ai.error.${ke}`,xe=Symbol.for(we);var Ee="AI_EmptyResponseBodyError",Se=`vercel.ai.error.${Ee}`,Ie=Symbol.for(Se);function Te(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}var ze,Ce="AI_InvalidArgumentError",Ae=`vercel.ai.error.${Ce}`,Ze=Symbol.for(Ae),$e=class extends _e{constructor({message:e,cause:t,argument:n}){super({name:Ce,message:e,cause:t}),this[ze]=!0,this.argument=n}static isInstance(e){return _e.hasMarker(e,Ae)}};ze=Ze;var Oe="AI_InvalidPromptError",Ne=`vercel.ai.error.${Oe}`,Pe=Symbol.for(Ne);var Re="AI_InvalidResponseDataError",Me=`vercel.ai.error.${Re}`,je=Symbol.for(Me);var Fe,De="AI_JSONParseError",Le=`vercel.ai.error.${De}`,Ue=Symbol.for(Le),Ve=class extends _e{constructor({text:e,cause:t}){super({name:De,message:`JSON parsing failed: Text: ${e}.\nError message: ${Te(t)}`,cause:t}),this[Fe]=!0,this.text=e}static isInstance(e){return _e.hasMarker(e,Le)}};Fe=Ue;var Be="AI_LoadAPIKeyError",We=`vercel.ai.error.${Be}`,Je=Symbol.for(We);var qe="AI_LoadSettingError",He=`vercel.ai.error.${qe}`,Ye=Symbol.for(He);var Ke="AI_NoContentGeneratedError",Ge=`vercel.ai.error.${Ke}`,Xe=Symbol.for(Ge);var Qe="AI_NoSuchModelError",et=`vercel.ai.error.${Qe}`,tt=Symbol.for(et);var nt="AI_TooManyEmbeddingValuesForCallError",rt=`vercel.ai.error.${nt}`,at=Symbol.for(rt);var st,it="AI_TypeValidationError",ot=`vercel.ai.error.${it}`,ct=Symbol.for(ot);st=ct;var lt=class e extends _e{constructor({value:e,cause:t}){super({name:it,message:`Type validation failed: Value: ${JSON.stringify(e)}.\nError message: ${Te(t)}`,cause:t}),this[st]=!0,this.value=e}static isInstance(e){return _e.hasMarker(e,ot)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}},ut="AI_UnsupportedFunctionalityError",dt=`vercel.ai.error.${ut}`,pt=Symbol.for(dt);class ht extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function ft(e){}function mt(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=ft,onError:n=ft,onRetry:r=ft,onComment:a}=e;let s,i="",o=!0,c="",l="";function u(e){if(""===e)return c.length>0&&t({id:s,event:l||void 0,data:c.endsWith("\n")?c.slice(0,-1):c}),s=void 0,c="",void(l="");if(e.startsWith(":"))return void(a&&a(e.slice(e.startsWith(": ")?2:1)));const n=e.indexOf(":");if(-1===n)d(e,"",e);else{const t=e.slice(0,n),r=" "===e[n+1]?2:1;d(t,e.slice(n+r),e)}}function d(e,t,a){switch(e){case"event":l=t;break;case"data":c=`${c}${t}\n`;break;case"id":s=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new ht(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:a}));break;default:n(new ht(`Unknown field "${e.length>20?`${e.slice(0,20)}â€¦`:e}"`,{type:"unknown-field",field:e,value:t,line:a}))}}return{feed:function(e){const t=o?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),s=e.indexOf("\n",r);let i=-1;if(-1!==a&&-1!==s?i=Math.min(a,s):-1!==a?i=a===e.length-1?-1:a:-1!==s&&(i=s),-1===i){n=e.slice(r);break}{const n=e.slice(r,i);t.push(n),r=i+1,"\r"===e[r-1]&&"\n"===e[r]&&r++}}return[t,n]}(`${i}${t}`);for(const e of n)u(e);i=r,o=!1},reset:function(e={}){i&&e.consume&&u(i),o=!0,s=void 0,c="",l="",i=""}}}class gt extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(a){r=mt({onEvent:e=>{a.enqueue(e)},onError(t){"terminate"===e?a.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}}Symbol("ZodOutput"),Symbol("ZodInput");class vt{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function yt(){return new vt}const bt=yt();function _t(e){const t=Object.values(e).filter((e=>"number"==typeof e));return Object.entries(e).filter((([e,n])=>-1===t.indexOf(+e))).map((([e,t])=>t))}function kt(e,t){return"bigint"==typeof t?t.toString():t}function wt(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function xt(e){return null==e}function Et(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function St(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function It(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Tt(e){return JSON.stringify(e)}const zt=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ct(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const At=wt((()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}}));function Zt(e){if(!1===Ct(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==Ct(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}const $t=new Set(["string","number","symbol"]);new Set(["string","number","bigint","boolean","symbol","undefined"]);function Ot(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Nt(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function Pt(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}const Rt={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Mt(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function jt(e,t){return t.map((t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t}))}function Ft(e){return"string"==typeof e?e:e?.message}function Dt(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const a=Ft(e.inst?._zod.def?.error?.(e))??Ft(t?.error?.(e))??Ft(n.customError?.(e))??Ft(n.localeError?.(e))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Lt(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Ut(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}class Vt{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??bt,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;const r=e._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s){s.count++;return t.schemaPath.includes(e)&&(s.cycle=t.path),s.schema}const i={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,i);const o=e._zod.toJSONSchema?.();if(o)i.schema=o;else{const n={...t,schemaPath:[...t.schemaPath,e],path:t.path},s=e._zod.parent;if(s)i.ref=s,this.process(s,n),this.seen.get(s).isParent=!0;else{const t=i.schema;switch(r.type){case"string":{const n=t;n.type="string";const{minimum:r,maximum:s,format:o,patterns:c,contentEncoding:l}=e._zod.bag;if("number"==typeof r&&(n.minLength=r),"number"==typeof s&&(n.maxLength=s),o&&(n.format=a[o]??o,""===n.format&&delete n.format),l&&(n.contentEncoding=l),c&&c.size>0){const e=[...c];1===e.length?n.pattern=e[0].source:e.length>1&&(i.schema.allOf=[...e.map((e=>({..."draft-7"===this.target?{type:"string"}:{},pattern:e.source})))])}break}case"number":{const n=t,{minimum:r,maximum:a,format:s,multipleOf:i,exclusiveMaximum:o,exclusiveMinimum:c}=e._zod.bag;"string"==typeof s&&s.includes("int")?n.type="integer":n.type="number","number"==typeof c&&(n.exclusiveMinimum=c),"number"==typeof r&&(n.minimum=r,"number"==typeof c&&(c>=r?delete n.minimum:delete n.exclusiveMinimum)),"number"==typeof o&&(n.exclusiveMaximum=o),"number"==typeof a&&(n.maximum=a,"number"==typeof o&&(o<=a?delete n.maximum:delete n.exclusiveMaximum)),"number"==typeof i&&(n.multipleOf=i);break}case"boolean":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"null":t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw new Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{const a=t,{minimum:s,maximum:i}=e._zod.bag;"number"==typeof s&&(a.minItems=s),"number"==typeof i&&(a.maxItems=i),a.type="array",a.items=this.process(r.element,{...n,path:[...n.path,"items"]});break}case"object":{const e=t;e.type="object",e.properties={};const a=r.shape;for(const t in a)e.properties[t]=this.process(a[t],{...n,path:[...n.path,"properties",t]});const s=new Set(Object.keys(a)),i=new Set([...s].filter((e=>{const t=r.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout})));i.size>0&&(e.required=Array.from(i)),"never"===r.catchall?._zod.def.type?e.additionalProperties=!1:r.catchall?r.catchall&&(e.additionalProperties=this.process(r.catchall,{...n,path:[...n.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":t.anyOf=r.options.map(((e,t)=>this.process(e,{...n,path:[...n.path,"anyOf",t]})));break;case"intersection":{const e=t,a=this.process(r.left,{...n,path:[...n.path,"allOf",0]}),s=this.process(r.right,{...n,path:[...n.path,"allOf",1]}),i=e=>"allOf"in e&&1===Object.keys(e).length,o=[...i(a)?a.allOf:[a],...i(s)?s.allOf:[s]];e.allOf=o;break}case"tuple":{const a=t;a.type="array";const s=r.items.map(((e,t)=>this.process(e,{...n,path:[...n.path,"prefixItems",t]})));if("draft-2020-12"===this.target?a.prefixItems=s:a.items=s,r.rest){const e=this.process(r.rest,{...n,path:[...n.path,"items"]});"draft-2020-12"===this.target?a.items=e:a.additionalItems=e}r.rest&&(a.items=this.process(r.rest,{...n,path:[...n.path,"items"]}));const{minimum:i,maximum:o}=e._zod.bag;"number"==typeof i&&(a.minItems=i),"number"==typeof o&&(a.maxItems=o);break}case"record":{const e=t;e.type="object",e.propertyNames=this.process(r.keyType,{...n,path:[...n.path,"propertyNames"]}),e.additionalProperties=this.process(r.valueType,{...n,path:[...n.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{const e=t,n=_t(r.entries);n.every((e=>"number"==typeof e))&&(e.type="number"),n.every((e=>"string"==typeof e))&&(e.type="string"),e.enum=n;break}case"literal":{const e=t,n=[];for(const e of r.values)if(void 0===e){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");n.push(Number(e))}else n.push(e);if(0===n.length);else if(1===n.length){const t=n[0];e.type=null===t?"null":typeof t,e.const=t}else n.every((e=>"number"==typeof e))&&(e.type="number"),n.every((e=>"string"==typeof e))&&(e.type="string"),n.every((e=>"boolean"==typeof e))&&(e.type="string"),n.every((e=>null===e))&&(e.type="null"),e.enum=n;break}case"file":{const n=t,r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:a,maximum:s,mime:i}=e._zod.bag;void 0!==a&&(r.minLength=a),void 0!==s&&(r.maxLength=s),i?1===i.length?(r.contentMediaType=i[0],Object.assign(n,r)):n.anyOf=i.map((e=>({...r,contentMediaType:e}))):Object.assign(n,r);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{const e=this.process(r.innerType,n);t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(r.innerType,n),i.ref=r.innerType;break;case"success":t.type="boolean";break;case"default":this.process(r.innerType,n),i.ref=r.innerType,t.default=JSON.parse(JSON.stringify(r.defaultValue));break;case"prefault":this.process(r.innerType,n),i.ref=r.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(r.defaultValue)));break;case"catch":{let e;this.process(r.innerType,n),i.ref=r.innerType;try{e=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{const n=t,r=e._zod.pattern;if(!r)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=r.source;break}case"pipe":{const e="input"===this.io?"transform"===r.in._zod.def.type?r.out:r.in:r.out;this.process(e,n),i.ref=e;break}case"readonly":this.process(r.innerType,n),i.ref=r.innerType,t.readOnly=!0;break;case"lazy":{const t=e._zod.innerType;this.process(t,n),i.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")}}}const c=this.metadataRegistry.get(e);c&&Object.assign(i.schema,c),"input"===this.io&&Bt(e)&&(delete i.schema.examples,delete i.schema.default),"input"===this.io&&i.schema._prefault&&((n=i.schema).default??(n.default=i.schema._prefault)),delete i.schema._prefault;return this.seen.get(e).schema}emit(e,t){const n={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},r=this.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=e=>{const t="draft-2020-12"===this.target?"$defs":"definitions";if(n.external){const r=n.external.registry.get(e[0])?.id,a=n.external.uri??(e=>e);if(r)return{ref:a(r)};const s=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=s,{defId:s,ref:`${a("__shared")}#/${t}/${s}`}}if(e[1]===r)return{ref:"#"};const a=`#/${t}/`,s=e[1].schema.id??"__schema"+this.counter++;return{defId:s,ref:a+s}},s=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:n,defId:r}=a(e);t.def={...t.schema},r&&(t.defId=r);const s=t.schema;for(const e in s)delete s[e];s.$ref=n};if("throw"===n.cycles)for(const e of this.seen.entries()){const t=e[1];if(t.cycle)throw new Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const t of this.seen.entries()){const r=t[1];if(e===t[0]){s(t);continue}if(n.external){const r=n.external.registry.get(t[0])?.id;if(e!==t[0]&&r){s(t);continue}}const a=this.metadataRegistry.get(t[0])?.id;a?s(t):(r.cycle||r.count>1&&"ref"===n.reused)&&s(t)}const i=(e,t)=>{const n=this.seen.get(e),r=n.def??n.schema,a={...r};if(null===n.ref)return;const s=n.ref;if(n.ref=null,s){i(s,t);const e=this.seen.get(s).schema;e.$ref&&"draft-7"===t.target?(r.allOf=r.allOf??[],r.allOf.push(e)):(Object.assign(r,e),Object.assign(r,a))}n.isParent||this.override({zodSchema:e,jsonSchema:r,path:n.path??[]})};for(const e of[...this.seen.entries()].reverse())i(e[0],{target:this.target});const o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),n.external?.uri){const t=n.external.registry.get(e)?.id;if(!t)throw new Error("Schema is missing an `id` property");o.$id=n.external.uri(t)}Object.assign(o,r.def);const c=n.external?.defs??{};for(const e of this.seen.entries()){const t=e[1];t.def&&t.defId&&(c[t.defId]=t.def)}n.external||Object.keys(c).length>0&&("draft-2020-12"===this.target?o.$defs=c:o.definitions=c);try{return JSON.parse(JSON.stringify(o))}catch(e){throw new Error("Error converting schema to JSON.")}}}function Bt(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;switch(r.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return Bt(r.element,n);case"object":for(const e in r.shape)if(Bt(r.shape[e],n))return!0;return!1;case"union":for(const e of r.options)if(Bt(e,n))return!0;return!1;case"intersection":return Bt(r.left,n)||Bt(r.right,n);case"tuple":for(const e of r.items)if(Bt(e,n))return!0;return!(!r.rest||!Bt(r.rest,n));case"record":case"map":return Bt(r.keyType,n)||Bt(r.valueType,n);case"set":return Bt(r.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return Bt(r.innerType,n);case"lazy":return Bt(r.getter(),n);case"transform":return!0;case"pipe":return Bt(r.in,n)||Bt(r.out,n)}throw new Error(`Unknown schema type: ${r.type}`)}Object.freeze({status:"aborted"});function Wt(e,t,n){function r(n,r){var a;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(a=n._zod).traits??(a.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in i.prototype)e in n||Object.defineProperty(n,e,{value:i.prototype[e].bind(n)});n._zod.constr=i,n._zod.def=r}const a=n?.Parent??Object;class s extends a{}function i(e){var t;const a=n?.Parent?new s:this;r(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const e of a._zod.deferred)e();return a}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}Symbol("zod_brand");class Jt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const qt={};function Ht(e){return e&&Object.assign(qt,e),qt}const Yt=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,kt,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Kt=Wt("$ZodError",Yt),Gt=Wt("$ZodError",Yt,{Parent:Error});const Xt=e=>(t,n,r,a)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Jt;if(i.issues.length){const t=new(a?.Err??e)(i.issues.map((e=>Dt(e,s,Ht()))));throw zt(t,a?.callee),t}return i.value},Qt=e=>async(t,n,r,a)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(a?.Err??e)(i.issues.map((e=>Dt(e,s,Ht()))));throw zt(t,a?.callee),t}return i.value},en=e=>(t,n,r)=>{const a=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new Jt;return s.issues.length?{success:!1,error:new(e??Kt)(s.issues.map((e=>Dt(e,a,Ht()))))}:{success:!0,data:s.value}},tn=en(Gt),nn=e=>async(t,n,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},a);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map((e=>Dt(e,a,Ht()))))}:{success:!0,data:s.value}},rn=nn(Gt),an=(e,t)=>{Kt.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const n=t||function(e){return e.message},r={_errors:[]},a=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map((e=>a({issues:e})));else if("invalid_key"===t.code)a({issues:t.issues});else if("invalid_element"===t.code)a({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,a=0;for(;a<t.path.length;){const r=t.path[a];a===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(e),r}(e,t)},flatten:{value:t=>function(e,t=(e=>e.message)){const n={},r=[];for(const a of e.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get(){return 0===e.issues.length}}})},sn=(Wt("ZodError",an),Wt("ZodError",an,{Parent:Error})),on=Xt(sn),cn=Qt(sn),ln=en(sn),un=nn(sn);var dn,pn;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(dn||(dn={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(pn||(pn={}));const hn=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fn=e=>{switch(typeof e){case"undefined":return hn.undefined;case"string":return hn.string;case"number":return Number.isNaN(e)?hn.nan:hn.number;case"boolean":return hn.boolean;case"function":return hn.function;case"bigint":return hn.bigint;case"symbol":return hn.symbol;case"object":return Array.isArray(e)?hn.array:null===e?hn.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?hn.promise:"undefined"!=typeof Map&&e instanceof Map?hn.map:"undefined"!=typeof Set&&e instanceof Set?hn.set:"undefined"!=typeof Date&&e instanceof Date?hn.date:hn.object;default:return hn.unknown}},mn=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class gn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof gn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}gn.create=e=>new gn(e);var vn=(e,t)=>{let n;switch(e.code){case mn.invalid_type:n=e.received===hn.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case mn.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,dn.jsonStringifyReplacer)}`;break;case mn.unrecognized_keys:n=`Unrecognized key(s) in object: ${dn.joinValues(e.keys,", ")}`;break;case mn.invalid_union:n="Invalid input";break;case mn.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${dn.joinValues(e.options)}`;break;case mn.invalid_enum_value:n=`Invalid enum value. Expected ${dn.joinValues(e.options)}, received '${e.received}'`;break;case mn.invalid_arguments:n="Invalid function arguments";break;case mn.invalid_return_type:n="Invalid function return type";break;case mn.invalid_date:n="Invalid date";break;case mn.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:dn.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case mn.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case mn.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case mn.custom:n="Invalid input";break;case mn.invalid_intersection_types:n="Intersection results could not be merged";break;case mn.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case mn.not_finite:n="Number must be finite";break;default:n=t.defaultError,dn.assertNever(e)}return{message:n}};let yn=vn;function bn(){return yn}var _n;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(_n||(_n={}));const kn=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,s=[...n,...a.path||[]],i={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let o="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(i,{data:t,defaultError:o}).message;return{...a,path:s,message:o}};function wn(e,t){const n=bn(),r=kn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===vn?void 0:vn].filter((e=>!!e))});e.common.issues.push(r)}class xn{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return En;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return xn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return En;if("aborted"===a.status)return En;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const En=Object.freeze({status:"aborted"}),Sn=e=>({status:"dirty",value:e}),In=e=>({status:"valid",value:e}),Tn=e=>"aborted"===e.status,zn=e=>"dirty"===e.status,Cn=e=>"valid"===e.status,An=e=>"undefined"!=typeof Promise&&e instanceof Promise;class Zn{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $n=(e,t)=>{if(Cn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new gn(e.common.issues);return this._error=t,this._error}}};function On(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:s}=e;return"invalid_enum_value"===t.code?{message:s??a.defaultError}:void 0===a.data?{message:s??r??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:s??n??a.defaultError}},description:a}}class Nn{get description(){return this._def.description}_getType(e){return fn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:fn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new xn,ctx:{common:e.parent.common,data:e.data,parsedType:fn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(An(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fn(e)},r=this._parseSync({data:e,path:n.path,parent:n});return $n(n,r)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fn(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return Cn(n)?{value:n.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then((e=>Cn(e)?{value:e.value}:{issues:t.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fn(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(An(r)?r:Promise.resolve(r));return $n(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const a=e(t),s=()=>r.addIssue({code:mn.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(s(),!1))):!!a||(s(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new Zr({schema:this,typeName:Dr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return $r.create(this,this._def)}nullable(){return Or.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gr.create(this)}promise(){return Ar.create(this,this._def)}or(e){return br.create([this,e],this._def)}and(e){return kr.create(this,e,this._def)}transform(e){return new Zr({...On(this._def),schema:this,typeName:Dr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Nr({...On(this._def),innerType:this,defaultValue:t,typeName:Dr.ZodDefault})}brand(){return new Mr({typeName:Dr.ZodBranded,type:this,...On(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Pr({...On(this._def),innerType:this,catchValue:t,typeName:Dr.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return jr.create(this,e)}readonly(){return Fr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Pn=/^c[^\s-]{8,}$/i,Rn=/^[0-9a-z]+$/,Mn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Fn=/^[a-z0-9_-]{21}$/i,Dn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ln=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Un=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Vn;const Bn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Kn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Gn=new RegExp(`^${Kn}$`);function Xn(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Qn(e){let t=`${Kn}T${Xn(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function er(e,t){return!("v4"!==t&&t||!Bn.test(e))||!("v6"!==t&&t||!Jn.test(e))}function tr(e,t){if(!Dn.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function nr(e,t){return!("v4"!==t&&t||!Wn.test(e))||!("v6"!==t&&t||!qn.test(e))}class rr extends Nn{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==hn.string){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.string,received:t.parsedType}),En}const t=new xn;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const a=e.data.length>r.value,s=e.data.length<r.value;(a||s)&&(n=this._getOrReturnCtx(e,n),a?wn(n,{code:mn.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):s&&wn(n,{code:mn.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)Un.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"email",code:mn.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Vn||(Vn=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Vn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"emoji",code:mn.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)jn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"uuid",code:mn.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)Fn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"nanoid",code:mn.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)Pn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"cuid",code:mn.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)Rn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"cuid2",code:mn.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)Mn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"ulid",code:mn.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),wn(n,{validation:"url",code:mn.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"regex",code:mn.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){Qn(r).test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){Gn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){new RegExp(`^${Xn(r)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?Ln.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"duration",code:mn.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?er(e.data,r.version)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"ip",code:mn.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?tr(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"jwt",code:mn.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?nr(e.data,r.version)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"cidr",code:mn.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?Hn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"base64",code:mn.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?Yn.test(e.data)||(n=this._getOrReturnCtx(e,n),wn(n,{validation:"base64url",code:mn.invalid_string,message:r.message}),t.dirty()):dn.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:mn.invalid_string,..._n.errToObj(n)})}_addCheck(e){return new rr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._n.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._n.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._n.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._n.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._n.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._n.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._n.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._n.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._n.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._n.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._n.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._n.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._n.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,..._n.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,..._n.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",..._n.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,..._n.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,..._n.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,..._n.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,..._n.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,..._n.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,..._n.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,..._n.errToObj(t)})}nonempty(e){return this.min(1,_n.errToObj(e))}trim(){return new rr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new rr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new rr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ar(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}rr.create=e=>new rr({checks:[],typeName:Dr.ZodString,coerce:e?.coerce??!1,...On(e)});class sr extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==hn.number){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.number,received:t.parsedType}),En}let t;const n=new xn;for(const r of this._def.checks)if("int"===r.kind)dn.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==ar(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.not_finite,message:r.message}),n.dirty()):dn.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,_n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_n.toString(t))}setLimit(e,t,n,r){return new sr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_n.toString(r)}]})}_addCheck(e){return new sr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_n.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_n.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:_n.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_n.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_n.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&dn.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}sr.create=e=>new sr({checks:[],typeName:Dr.ZodNumber,coerce:e?.coerce||!1,...On(e)});class ir extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==hn.bigint)return this._getInvalidInput(e);let t;const n=new xn;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),wn(t,{code:mn.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):dn.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.bigint,received:t.parsedType}),En}gte(e,t){return this.setLimit("min",e,!0,_n.toString(t))}gt(e,t){return this.setLimit("min",e,!1,_n.toString(t))}lte(e,t){return this.setLimit("max",e,!0,_n.toString(t))}lt(e,t){return this.setLimit("max",e,!1,_n.toString(t))}setLimit(e,t,n,r){return new ir({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:_n.toString(r)}]})}_addCheck(e){return new ir({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_n.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_n.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_n.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_n.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:_n.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ir.create=e=>new ir({checks:[],typeName:Dr.ZodBigInt,coerce:e?.coerce??!1,...On(e)});class or extends Nn{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==hn.boolean){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.boolean,received:t.parsedType}),En}return In(e.data)}}or.create=e=>new or({typeName:Dr.ZodBoolean,coerce:e?.coerce||!1,...On(e)});class cr extends Nn{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==hn.date){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.date,received:t.parsedType}),En}if(Number.isNaN(e.data.getTime())){return wn(this._getOrReturnCtx(e),{code:mn.invalid_date}),En}const t=new xn;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),wn(n,{code:mn.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):dn.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:_n.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:_n.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}cr.create=e=>new cr({checks:[],coerce:e?.coerce||!1,typeName:Dr.ZodDate,...On(e)});class lr extends Nn{_parse(e){if(this._getType(e)!==hn.symbol){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.symbol,received:t.parsedType}),En}return In(e.data)}}lr.create=e=>new lr({typeName:Dr.ZodSymbol,...On(e)});class ur extends Nn{_parse(e){if(this._getType(e)!==hn.undefined){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.undefined,received:t.parsedType}),En}return In(e.data)}}ur.create=e=>new ur({typeName:Dr.ZodUndefined,...On(e)});class dr extends Nn{_parse(e){if(this._getType(e)!==hn.null){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.null,received:t.parsedType}),En}return In(e.data)}}dr.create=e=>new dr({typeName:Dr.ZodNull,...On(e)});class pr extends Nn{constructor(){super(...arguments),this._any=!0}_parse(e){return In(e.data)}}pr.create=e=>new pr({typeName:Dr.ZodAny,...On(e)});class hr extends Nn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return In(e.data)}}hr.create=e=>new hr({typeName:Dr.ZodUnknown,...On(e)});class fr extends Nn{_parse(e){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.never,received:t.parsedType}),En}}fr.create=e=>new fr({typeName:Dr.ZodNever,...On(e)});class mr extends Nn{_parse(e){if(this._getType(e)!==hn.undefined){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.void,received:t.parsedType}),En}return In(e.data)}}mr.create=e=>new mr({typeName:Dr.ZodVoid,...On(e)});class gr extends Nn{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==hn.array)return wn(t,{code:mn.invalid_type,expected:hn.array,received:t.parsedType}),En;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(wn(t,{code:e?mn.too_big:mn.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(wn(t,{code:mn.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(wn(t,{code:mn.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Zn(t,e,t.path,n))))).then((e=>xn.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>r.type._parseSync(new Zn(t,e,t.path,n))));return xn.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new gr({...this._def,minLength:{value:e,message:_n.toString(t)}})}max(e,t){return new gr({...this._def,maxLength:{value:e,message:_n.toString(t)}})}length(e,t){return new gr({...this._def,exactLength:{value:e,message:_n.toString(t)}})}nonempty(e){return this.min(1,e)}}function vr(e){if(e instanceof yr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=$r.create(vr(r))}return new yr({...e._def,shape:()=>t})}return e instanceof gr?new gr({...e._def,type:vr(e.element)}):e instanceof $r?$r.create(vr(e.unwrap())):e instanceof Or?Or.create(vr(e.unwrap())):e instanceof wr?wr.create(e.items.map((e=>vr(e)))):e}gr.create=(e,t)=>new gr({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Dr.ZodArray,...On(t)});class yr extends Nn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=dn.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==hn.object){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.object,received:t.parsedType}),En}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof fr&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||s.push(e);const i=[];for(const e of a){const t=r[e],a=n.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new Zn(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof fr){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)s.length>0&&(wn(n,{code:mn.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new Zn(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of i){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>xn.mergeObjectSync(t,e))):xn.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return _n.errToObj,new yr({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const r=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:_n.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new yr({...this._def,unknownKeys:"strip"})}passthrough(){return new yr({...this._def,unknownKeys:"passthrough"})}extend(e){return new yr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Dr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new yr({...this._def,catchall:e})}pick(e){const t={};for(const n of dn.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new yr({...this._def,shape:()=>t})}omit(e){const t={};for(const n of dn.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new yr({...this._def,shape:()=>t})}deepPartial(){return vr(this)}partial(e){const t={};for(const n of dn.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new yr({...this._def,shape:()=>t})}required(e){const t={};for(const n of dn.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof $r;)e=e._def.innerType;t[n]=e}return new yr({...this._def,shape:()=>t})}keyof(){return Tr(dn.objectKeys(this.shape))}}yr.create=(e,t)=>new yr({shape:()=>e,unknownKeys:"strip",catchall:fr.create(),typeName:Dr.ZodObject,...On(t)}),yr.strictCreate=(e,t)=>new yr({shape:()=>e,unknownKeys:"strict",catchall:fr.create(),typeName:Dr.ZodObject,...On(t)}),yr.lazycreate=(e,t)=>new yr({shape:e,unknownKeys:"strip",catchall:fr.create(),typeName:Dr.ZodObject,...On(t)});class br extends Nn{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new gn(e.ctx.common.issues)));return wn(t,{code:mn.invalid_union,unionErrors:n}),En}));{let e;const r=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map((e=>new gn(e)));return wn(t,{code:mn.invalid_union,unionErrors:a}),En}}get options(){return this._def.options}}br.create=(e,t)=>new br({options:e,typeName:Dr.ZodUnion,...On(t)});function _r(e,t){const n=fn(e),r=fn(t);if(e===t)return{valid:!0,data:e};if(n===hn.object&&r===hn.object){const n=dn.objectKeys(t),r=dn.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of r){const r=_r(e[n],t[n]);if(!r.valid)return{valid:!1};a[n]=r.data}return{valid:!0,data:a}}if(n===hn.array&&r===hn.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=_r(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===hn.date&&r===hn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class kr extends Nn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Tn(e)||Tn(r))return En;const a=_r(e.value,r.value);return a.valid?((zn(e)||zn(r))&&t.dirty(),{status:t.value,value:a.data}):(wn(n,{code:mn.invalid_intersection_types}),En)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}kr.create=(e,t,n)=>new kr({left:e,right:t,typeName:Dr.ZodIntersection,...On(n)});class wr extends Nn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==hn.array)return wn(n,{code:mn.invalid_type,expected:hn.array,received:n.parsedType}),En;if(n.data.length<this._def.items.length)return wn(n,{code:mn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&n.data.length>this._def.items.length&&(wn(n,{code:mn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Zn(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>xn.mergeArray(t,e))):xn.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new wr({...this._def,rest:e})}}wr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wr({items:e,typeName:Dr.ZodTuple,rest:null,...On(t)})};class xr extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==hn.map)return wn(n,{code:mn.invalid_type,expected:hn.map,received:n.parsedType}),En;const r=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map((([e,t],s)=>({key:r._parse(new Zn(n,e,n.path,[s,"key"])),value:a._parse(new Zn(n,t,n.path,[s,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of s){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return En;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return En;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}xr.create=(e,t,n)=>new xr({valueType:t,keyType:e,typeName:Dr.ZodMap,...On(n)});class Er extends Nn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==hn.set)return wn(n,{code:mn.invalid_type,expected:hn.set,received:n.parsedType}),En;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(wn(n,{code:mn.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(wn(n,{code:mn.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return En;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map(((e,t)=>a._parse(new Zn(n,e,n.path,t))));return n.common.async?Promise.all(i).then((e=>s(e))):s(i)}min(e,t){return new Er({...this._def,minSize:{value:e,message:_n.toString(t)}})}max(e,t){return new Er({...this._def,maxSize:{value:e,message:_n.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Er.create=(e,t)=>new Er({valueType:e,minSize:null,maxSize:null,typeName:Dr.ZodSet,...On(t)});class Sr extends Nn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Sr.create=(e,t)=>new Sr({getter:e,typeName:Dr.ZodLazy,...On(t)});class Ir extends Nn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return wn(t,{received:t.data,code:mn.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Tr(e,t){return new zr({values:e,typeName:Dr.ZodEnum,...On(t)})}Ir.create=(e,t)=>new Ir({value:e,typeName:Dr.ZodLiteral,...On(t)});class zr extends Nn{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return wn(t,{expected:dn.joinValues(n),received:t.parsedType,code:mn.invalid_type}),En}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return wn(t,{received:t.data,code:mn.invalid_enum_value,options:n}),En}return In(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return zr.create(e,{...this._def,...t})}exclude(e,t=this._def){return zr.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}zr.create=Tr;class Cr extends Nn{_parse(e){const t=dn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==hn.string&&n.parsedType!==hn.number){const e=dn.objectValues(t);return wn(n,{expected:dn.joinValues(e),received:n.parsedType,code:mn.invalid_type}),En}if(this._cache||(this._cache=new Set(dn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=dn.objectValues(t);return wn(n,{received:n.data,code:mn.invalid_enum_value,options:e}),En}return In(e.data)}get enum(){return this._def.values}}Cr.create=(e,t)=>new Cr({values:e,typeName:Dr.ZodNativeEnum,...On(t)});class Ar extends Nn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==hn.promise&&!1===t.common.async)return wn(t,{code:mn.invalid_type,expected:hn.promise,received:t.parsedType}),En;const n=t.parsedType===hn.promise?t.data:Promise.resolve(t.data);return In(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ar.create=(e,t)=>new Ar({type:e,typeName:Dr.ZodPromise,...On(t)});class Zr extends Nn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{wn(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return En;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?En:"dirty"===r.status||"dirty"===t.value?Sn(r.value):r}));{if("aborted"===t.value)return En;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?En:"dirty"===r.status||"dirty"===t.value?Sn(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?En:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?En:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Cn(e))return En;const s=r.transform(e.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Cn(e)?Promise.resolve(r.transform(e.value,a)).then((e=>({status:t.value,value:e}))):En))}dn.assertNever(r)}}Zr.create=(e,t,n)=>new Zr({schema:e,typeName:Dr.ZodEffects,effect:t,...On(n)}),Zr.createWithPreprocess=(e,t,n)=>new Zr({schema:t,effect:{type:"preprocess",transform:e},typeName:Dr.ZodEffects,...On(n)});class $r extends Nn{_parse(e){return this._getType(e)===hn.undefined?In(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$r.create=(e,t)=>new $r({innerType:e,typeName:Dr.ZodOptional,...On(t)});class Or extends Nn{_parse(e){return this._getType(e)===hn.null?In(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Or.create=(e,t)=>new Or({innerType:e,typeName:Dr.ZodNullable,...On(t)});class Nr extends Nn{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===hn.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Nr.create=(e,t)=>new Nr({innerType:e,typeName:Dr.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...On(t)});class Pr extends Nn{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return An(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new gn(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new gn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Pr.create=(e,t)=>new Pr({innerType:e,typeName:Dr.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...On(t)});class Rr extends Nn{_parse(e){if(this._getType(e)!==hn.nan){const t=this._getOrReturnCtx(e);return wn(t,{code:mn.invalid_type,expected:hn.nan,received:t.parsedType}),En}return{status:"valid",value:e.data}}}Rr.create=e=>new Rr({typeName:Dr.ZodNaN,...On(e)});Symbol("zod_brand");class Mr extends Nn{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class jr extends Nn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?En:"dirty"===e.status?(t.dirty(),Sn(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?En:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new jr({in:e,out:t,typeName:Dr.ZodPipeline})}}class Fr extends Nn{_parse(e){const t=this._def.innerType._parse(e),n=e=>(Cn(e)&&(e.value=Object.freeze(e.value)),e);return An(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}Fr.create=(e,t)=>new Fr({innerType:e,typeName:Dr.ZodReadonly,...On(t)});yr.lazycreate;var Dr;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Dr||(Dr={}));rr.create,sr.create,Rr.create,ir.create,or.create,cr.create,lr.create,ur.create,dr.create,pr.create,hr.create,fr.create,mr.create,gr.create,yr.create,yr.strictCreate,br.create,kr.create,wr.create,xr.create,Er.create,Sr.create,Ir.create,zr.create,Cr.create,Ar.create,Zr.create,$r.create,Or.create,Zr.createWithPreprocess,jr.create;n(34155);var Lr=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=()=>{const e=n.length,r=new Array(t);for(let a=0;a<t;a++)r[a]=n[Math.random()*e|0];return r.join("")};if(null==e)return a;if(n.includes(r))throw new $e({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return()=>`${e}${r}${a()}`},Ur=Lr();function Vr(e=globalThis){var t,n,r;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(r=null==(n=e.process)?void 0:n.versions)?void 0:r.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Br(e){if(null==e)return{};const t={};if(e instanceof Headers)e.forEach(((e,n)=>{t[n.toLowerCase()]=e}));else{Array.isArray(e)||(e=Object.entries(e));for(const[n,r]of e)null!=r&&(t[n.toLowerCase()]=r)}return t}function Wr(e,...t){const n=new Headers(Br(e)),r=n.get("user-agent")||"";return n.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(n.entries())}var Jr=/"__proto__"\s*:/,qr=/"constructor"\s*:/;function Hr(e){const t=JSON.parse(e);return null===t||"object"!=typeof t||!1===Jr.test(e)&&!1===qr.test(e)?t:function(e){let t=[e];for(;t.length;){const e=t;t=[];for(const n of e){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const e in n){const r=n[e];r&&"object"==typeof r&&t.push(r)}}}return e}(t)}function Yr(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(t){return Hr(e)}try{return Hr(e)}finally{Error.stackTraceLimit=t}}var Kr=Symbol.for("vercel.ai.validator");function Gr(e){let t;return()=>(null==t&&(t=e()),t)}function Xr(e){return function(e){return"object"==typeof e&&null!==e&&Kr in e&&!0===e[Kr]&&"validate"in e}(e)?e:"function"==typeof e?e():(t=e,n=async e=>{const n=await t["~standard"].validate(e);return null==n.issues?{success:!0,value:n.value}:{success:!1,error:new lt({value:e,cause:n.issues})}},{[Kr]:!0,validate:n});var t,n}async function Qr({value:e,schema:t}){const n=await ea({value:e,schema:t});if(!n.success)throw lt.wrap({value:e,cause:n.error});return n.value}async function ea({value:e,schema:t}){const n=Xr(t);try{if(null==n.validate)return{success:!0,value:e,rawValue:e};const t=await n.validate(e);return t.success?{success:!0,value:t.value,rawValue:e}:{success:!1,error:lt.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:lt.wrap({value:e,cause:t}),rawValue:e}}}async function ta({text:e,schema:t}){try{const n=Yr(e);return null==t?{success:!0,value:n,rawValue:n}:await ea({value:n,schema:t})}catch(t){return{success:!1,error:Ve.isInstance(t)?t:new Ve({text:e,cause:t}),rawValue:void 0}}}function na({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new gt).pipeThrough(new TransformStream({async transform({data:e},n){"[DONE]"!==e&&n.enqueue(await ta({text:e,schema:t}))}}))}async function ra(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var aa=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},sa=Symbol("Let zodToJsonSchema decide on which parser to use"),ia={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function oa(e,t){return Na(e.type._def,t)}function ca(e,t,n){const r=null!=n?n:t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(((n,r)=>ca(e,t,n)))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return la(e)}}var la=e=>{const t={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":t.minimum=n.value;break;case"max":t.maximum=n.value}return t};var ua=void 0,da=/^[cC][^\s-]{8,}$/,pa=/^[0-9a-z]+$/,ha=/^[0-9A-HJKMNP-TV-Z]{26}$/,fa=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,ma=()=>(void 0===ua&&(ua=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ua),ga=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,va=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ya=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ba=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_a=/^[a-zA-Z0-9_-]{21}$/,ka=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function wa(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":n.minLength="number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value;break;case"max":n.maxLength="number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":Sa(n,"email",r.message,t);break;case"format:idn-email":Sa(n,"idn-email",r.message,t);break;case"pattern:zod":Ia(n,fa,r.message,t)}break;case"url":Sa(n,"uri",r.message,t);break;case"uuid":Sa(n,"uuid",r.message,t);break;case"regex":Ia(n,r.regex,r.message,t);break;case"cuid":Ia(n,da,r.message,t);break;case"cuid2":Ia(n,pa,r.message,t);break;case"startsWith":Ia(n,RegExp(`^${xa(r.value,t)}`),r.message,t);break;case"endsWith":Ia(n,RegExp(`${xa(r.value,t)}$`),r.message,t);break;case"datetime":Sa(n,"date-time",r.message,t);break;case"date":Sa(n,"date",r.message,t);break;case"time":Sa(n,"time",r.message,t);break;case"duration":Sa(n,"duration",r.message,t);break;case"length":n.minLength="number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,n.maxLength="number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value;break;case"includes":Ia(n,RegExp(xa(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&Sa(n,"ipv4",r.message,t),"v4"!==r.version&&Sa(n,"ipv6",r.message,t);break;case"base64url":Ia(n,ba,r.message,t);break;case"jwt":Ia(n,ka,r.message,t);break;case"cidr":"v6"!==r.version&&Ia(n,ga,r.message,t),"v4"!==r.version&&Ia(n,va,r.message,t);break;case"emoji":Ia(n,ma(),r.message,t);break;case"ulid":Ia(n,ha,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Sa(n,"binary",r.message,t);break;case"contentEncoding:base64":n.contentEncoding="base64";break;case"pattern:zod":Ia(n,ya,r.message,t)}break;case"nanoid":Ia(n,_a,r.message,t)}return n}function xa(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)Ea.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}var Ea=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Sa(e,t,n,r){var a;e.format||(null==(a=e.anyOf)?void 0:a.some((e=>e.format)))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):e.format=t}function Ia(e,t,n,r){var a;e.pattern||(null==(a=e.allOf)?void 0:a.some((e=>e.pattern)))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Ta(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):e.pattern=Ta(t,r)}function Ta(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),a=e.flags.includes("m"),s=e.flags.includes("s"),i=r?e.source.toLowerCase():e.source;let o="",c=!1,l=!1,u=!1;for(let e=0;e<i.length;e++)if(c)o+=i[e],c=!1;else{if(r)if(l){if(i[e].match(/[a-z]/)){u?(o+=i[e],o+=`${i[e-2]}-${i[e]}`.toUpperCase(),u=!1):"-"===i[e+1]&&(null==(n=i[e+2])?void 0:n.match(/[a-z]/))?(o+=i[e],u=!0):o+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){o+=`[${i[e]}${i[e].toUpperCase()}]`;continue}if(a){if("^"===i[e]){o+="(^|(?<=[\r\n]))";continue}if("$"===i[e]){o+="($|(?=[\r\n]))";continue}}s&&"."===i[e]?o+=l?`${i[e]}\r\n`:`[${i[e]}\r\n]`:(o+=i[e],"\\"===i[e]?c=!0:l&&"]"===i[e]?l=!1:l||"["!==i[e]||(l=!0))}try{new RegExp(o)}catch(n){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function za(e,t){var n,r,a,s,i,o;const c={type:"object",additionalProperties:null!=(n=Na(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?n:t.allowedAdditionalProperties};if((null==(r=e.keyType)?void 0:r._def.typeName)===Dr.ZodString&&(null==(a=e.keyType._def.checks)?void 0:a.length)){const{type:n,...r}=wa(e.keyType._def,t);return{...c,propertyNames:r}}if((null==(s=e.keyType)?void 0:s._def.typeName)===Dr.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if((null==(i=e.keyType)?void 0:i._def.typeName)===Dr.ZodBranded&&e.keyType._def.type._def.typeName===Dr.ZodString&&(null==(o=e.keyType._def.type._def.checks)?void 0:o.length)){const{type:n,...r}=oa(e.keyType._def,t);return{...c,propertyNames:r}}return c}var Ca={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};var Aa=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,n)=>Na(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]}))).filter((e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0)));return n.length?{anyOf:n}:void 0};function Za(e,t){const n={type:"object",properties:{}},r=[],a=e.shape();for(const e in a){let s=a[e];if(void 0===s||void 0===s._def)continue;const i=$a(s),o=Na(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==o&&(n.properties[e]=o,i||r.push(e))}r.length&&(n.required=r);const s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return Na(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(n.additionalProperties=s),n}function $a(e){try{return e.isOptional()}catch(e){return!0}}var Oa=(e,t,n)=>{switch(t){case Dr.ZodString:return wa(e,n);case Dr.ZodNumber:return function(e){const t={type:"number"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"int":t.type="integer";break;case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value}return t}(e);case Dr.ZodObject:return Za(e,n);case Dr.ZodBigInt:return function(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const n of e.checks)switch(n.kind){case"min":n.inclusive?t.minimum=n.value:t.exclusiveMinimum=n.value;break;case"max":n.inclusive?t.maximum=n.value:t.exclusiveMaximum=n.value;break;case"multipleOf":t.multipleOf=n.value}return t}(e);case Dr.ZodBoolean:return{type:"boolean"};case Dr.ZodDate:return ca(e,n);case Dr.ZodUndefined:return{not:{}};case Dr.ZodNull:return{type:"null"};case Dr.ZodArray:return function(e,t){var n,r,a;const s={type:"array"};return(null==(n=e.type)?void 0:n._def)&&(null==(a=null==(r=e.type)?void 0:r._def)?void 0:a.typeName)!==Dr.ZodAny&&(s.items=Na(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}(e,n);case Dr.ZodUnion:case Dr.ZodDiscriminatedUnion:return function(e,t){const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every((e=>e._def.typeName in Ca&&(!e._def.checks||!e._def.checks.length)))){const e=n.reduce(((e,t)=>{const n=Ca[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e}),[]);return{type:e.length>1?e:e[0]}}if(n.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=n.reduce(((e,t)=>{const n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===n.length){const t=e.filter(((e,t,n)=>n.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:n.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(n.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:n.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return Aa(e,t)}(e,n);case Dr.ZodIntersection:return function(e,t){const n=[Na(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Na(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter((e=>!!e)),r=[];return n.forEach((e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:n,...r}=e;t=r}r.push(t)}else r.push(...e.allOf);var t})),r.length?{allOf:r}:void 0}(e,n);case Dr.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,n)=>Na(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:Na(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,n)=>Na(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}(e,n);case Dr.ZodRecord:return za(e,n);case Dr.ZodLiteral:return function(e){const t=typeof e.value;return"bigint"!==t&&"number"!==t&&"boolean"!==t&&"string"!==t?{type:Array.isArray(e.value)?"array":"object"}:{type:"bigint"===t?"integer":t,const:e.value}}(e);case Dr.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case Dr.ZodNativeEnum:return function(e){const t=e.values,n=Object.keys(e.values).filter((e=>"number"!=typeof t[t[e]])).map((e=>t[e])),r=Array.from(new Set(n.map((e=>typeof e))));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case Dr.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Ca[e.innerType._def.typeName],"null"]};const n=Na(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case Dr.ZodOptional:return((e,t)=>{var n;if(t.currentPath.toString()===(null==(n=t.propertyPath)?void 0:n.toString()))return Na(e.innerType._def,t);const r=Na(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}})(e,n);case Dr.ZodMap:return function(e,t){return"record"===t.mapStrategy?za(e,t):{type:"array",maxItems:125,items:{type:"array",items:[Na(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},Na(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,n);case Dr.ZodSet:return function(e,t){const n={type:"array",uniqueItems:!0,items:Na(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}(e,n);case Dr.ZodLazy:return()=>e.getter()._def;case Dr.ZodPromise:return function(e,t){return Na(e.type._def,t)}(e,n);case Dr.ZodNaN:case Dr.ZodNever:return{not:{}};case Dr.ZodEffects:return function(e,t){return"input"===t.effectStrategy?Na(e.schema._def,t):{}}(e,n);case Dr.ZodAny:case Dr.ZodUnknown:return{};case Dr.ZodDefault:return function(e,t){return{...Na(e.innerType._def,t),default:e.defaultValue()}}(e,n);case Dr.ZodBranded:return oa(e,n);case Dr.ZodReadonly:case Dr.ZodCatch:return((e,t)=>Na(e.innerType._def,t))(e,n);case Dr.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return Na(e.in._def,t);if("output"===t.pipeStrategy)return Na(e.out._def,t);const n=Na(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[n,Na(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]})].filter((e=>void 0!==e))}})(e,n);case Dr.ZodFunction:case Dr.ZodVoid:case Dr.ZodSymbol:default:return}};function Na(e,t,n=!1){var r;const a=t.seen.get(e);if(t.override){const s=null==(r=t.override)?void 0:r.call(t,e,t,a,n);if(s!==sa)return s}if(a&&!n){const e=Pa(a,t);if(void 0!==e)return e}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=Oa(e,e.typeName,t),o="function"==typeof i?Na(i(),t):i;if(o&&Ra(e,t,o),t.postProcess){const n=t.postProcess(o,e,t);return s.jsonSchema=o,n}return s.jsonSchema=o,o}var Pa=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:aa(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every(((e,n)=>t.currentPath[n]===e))?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},Ra=(e,t,n)=>(e.description&&(n.description=e.description),n),Ma=e=>{const t=(e=>"string"==typeof e?{...ia,name:e}:{...ia,...e})(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map((([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}])))}},ja=(e,t)=>{var n;const r=Ma(t);let a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,[t,n])=>{var a;return{...e,[t]:null!=(a=Na(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0))?a:{}}}),{}):void 0;const s="string"==typeof t?t:"title"===(null==t?void 0:t.nameStrategy)||null==t?void 0:t.name,i=null!=(n=Na(e._def,void 0===s?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1))?n:{},o="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==o&&(i.title=o);const c=void 0===s?a?{...i,[r.definitionPath]:a}:i:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...a,[s]:i}};return c.$schema="http://json-schema.org/draft-07/schema#",c};function Fa(e,t){var n;const r=null!=(n=null==t?void 0:t.useReferences)&&n;return Ua((()=>function(e,t){if(e instanceof vt){const n=new Vt(t),r={};for(const t of e._idmap.entries()){const[e,r]=t;n.process(r)}const a={},s={registry:e,uri:t?.uri,defs:r};for(const r of e._idmap.entries()){const[e,i]=r;a[e]=n.emit(i,{...t,external:s})}if(Object.keys(r).length>0){const e="draft-2020-12"===n.target?"$defs":"definitions";a.__shared={[e]:r}}return{schemas:a}}const n=new Vt(t);return n.process(e),n.emit(e,t)}(e,{target:"draft-7",io:"output",reused:r?"ref":"inline"})),{validate:async t=>{const n=await un(e,t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}function Da(e,t){return function(e){return"_zod"in e}(e)?Fa(e,t):function(e,t){var n;const r=null!=(n=null==t?void 0:t.useReferences)&&n;return Ua((()=>ja(e,{$refStrategy:r?"root":"none"})),{validate:async t=>{const n=await e.safeParseAsync(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}(e,t)}var La=Symbol.for("vercel.ai.schema");function Ua(e,{validate:t}={}){return{[La]:!0,_type:void 0,[Kr]:!0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}function Va(e){return null==e?Ua({properties:{},additionalProperties:!1}):"object"==typeof(t=e)&&null!==t&&La in t&&!0===t[La]&&"jsonSchema"in t&&"validate"in t?e:"function"==typeof e?e():Da(e);var t}var{btoa:Ba,atob:Wa}=globalThis;const Ja=/^[cC][^\s-]{8,}$/,qa=/^[0-9a-z]+$/,Ha=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ya=/^[0-9a-vA-V]{20}$/,Ka=/^[A-Za-z0-9]{27}$/,Ga=/^[a-zA-Z0-9_-]{21}$/,Xa=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Qa=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,es=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,ts=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const ns=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rs=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,as=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ss=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,is=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,os=/^[A-Za-z0-9_-]*$/,cs=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,ls=/^\+(?:[0-9]){6,14}[0-9]$/,us="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ds=new RegExp(`^${us}$`);function ps(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const hs=/^\d+$/,fs=/^-?\d+(?:\.\d+)?/i,ms=/true|false/i,gs=/null/i,vs=/^[^A-Z]*$/,ys=/^[^a-z]*$/,bs=Wt("$ZodCheck",((e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])})),_s={number:"number",bigint:"bigint",object:"date"},ks=Wt("$ZodCheckLessThan",((e,t)=>{bs.init(e,t);const n=_s[typeof t.value];e._zod.onattach.push((e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)})),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}})),ws=Wt("$ZodCheckGreaterThan",((e,t)=>{bs.init(e,t);const n=_s[typeof t.value];e._zod.onattach.push((e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)})),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}})),xs=Wt("$ZodCheckMultipleOf",((e,t)=>{bs.init(e,t),e._zod.onattach.push((e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)})),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}})),Es=Wt("$ZodCheckNumberFormat",((e,t)=>{bs.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[a,s]=Rt[t.format];e._zod.onattach.push((e=>{const r=e._zod.bag;r.format=t.format,r.minimum=a,r.maximum=s,n&&(r.pattern=hs)})),e._zod.check=i=>{const o=i.value;if(n){if(!Number.isInteger(o))return void i.issues.push({expected:r,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?i.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):i.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}o<a&&i.issues.push({origin:"number",input:o,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),o>s&&i.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}})),Ss=Wt("$ZodCheckMaxLength",((e,t)=>{var n;bs.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!xt(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)})),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const a=Lt(r);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Is=Wt("$ZodCheckMinLength",((e,t)=>{var n;bs.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!xt(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)})),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const a=Lt(r);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}})),Ts=Wt("$ZodCheckLengthEquals",((e,t)=>{var n;bs.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!xt(t)&&void 0!==t.length}),e._zod.onattach.push((e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length})),e._zod.check=n=>{const r=n.value,a=r.length;if(a===t.length)return;const s=Lt(r),i=a>t.length;n.issues.push({origin:s,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}})),zs=Wt("$ZodCheckStringFormat",((e,t)=>{var n,r;bs.init(e,t),e._zod.onattach.push((e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))})),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})})),Cs=Wt("$ZodCheckRegex",((e,t)=>{zs.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}})),As=Wt("$ZodCheckLowerCase",((e,t)=>{t.pattern??(t.pattern=vs),zs.init(e,t)})),Zs=Wt("$ZodCheckUpperCase",((e,t)=>{t.pattern??(t.pattern=ys),zs.init(e,t)})),$s=Wt("$ZodCheckIncludes",((e,t)=>{bs.init(e,t);const n=Ot(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)})),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}})),Os=Wt("$ZodCheckStartsWith",((e,t)=>{bs.init(e,t);const n=new RegExp(`^${Ot(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)})),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}})),Ns=Wt("$ZodCheckEndsWith",((e,t)=>{bs.init(e,t);const n=new RegExp(`.*${Ot(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push((e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)})),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}));const Ps=Wt("$ZodCheckOverwrite",((e,t)=>{bs.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}));class Rs{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter((e=>e)),n=Math.min(...t.map((e=>e.length-e.trimStart().length))),r=t.map((e=>e.slice(n))).map((e=>" ".repeat(2*this.indent)+e));for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map((e=>`  ${e}`))].join("\n"))}}const Ms={major:4,minor:0,patch:0},js=Wt("$ZodType",((e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Ms;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push((()=>{e._zod.run=e._zod.parse}));else{const t=(e,t,n)=>{let r,a=Mt(e);for(const s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(a)continue;const t=e.issues.length,i=s._zod.check(e);if(i instanceof Promise&&!1===n?.async)throw new Jt;if(r||i instanceof Promise)r=(r??Promise.resolve()).then((async()=>{await i;e.issues.length!==t&&(a||(a=Mt(e,t)))}));else{if(e.issues.length===t)continue;a||(a=Mt(e,t))}}return r?r.then((()=>e)):e};e._zod.run=(n,a)=>{const s=e._zod.parse(n,a);if(s instanceof Promise){if(!1===a.async)throw new Jt;return s.then((e=>t(e,r,a)))}return t(s,r,a)}}e["~standard"]={validate:t=>{try{const n=tn(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return rn(e,t).then((e=>e.success?{value:e.data}:{issues:e.error?.issues}))}},vendor:"zod",version:1}})),Fs=Wt("$ZodString",((e,t)=>{var n;js.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}})),Ds=Wt("$ZodStringFormat",((e,t)=>{zs.init(e,t),Fs.init(e,t)})),Ls=Wt("$ZodGUID",((e,t)=>{t.pattern??(t.pattern=Qa),Ds.init(e,t)})),Us=Wt("$ZodUUID",((e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=es(e))}else t.pattern??(t.pattern=es());Ds.init(e,t)})),Vs=Wt("$ZodEmail",((e,t)=>{t.pattern??(t.pattern=ts),Ds.init(e,t)})),Bs=Wt("$ZodURL",((e,t)=>{Ds.init(e,t),e._zod.check=n=>{try{const r=n.value,a=new URL(r),s=a.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:cs.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(!r.endsWith("/")&&s.endsWith("/")?n.value=s.slice(0,-1):n.value=s)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}})),Ws=Wt("$ZodEmoji",((e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ds.init(e,t)})),Js=Wt("$ZodNanoID",((e,t)=>{t.pattern??(t.pattern=Ga),Ds.init(e,t)})),qs=Wt("$ZodCUID",((e,t)=>{t.pattern??(t.pattern=Ja),Ds.init(e,t)})),Hs=Wt("$ZodCUID2",((e,t)=>{t.pattern??(t.pattern=qa),Ds.init(e,t)})),Ys=Wt("$ZodULID",((e,t)=>{t.pattern??(t.pattern=Ha),Ds.init(e,t)})),Ks=Wt("$ZodXID",((e,t)=>{t.pattern??(t.pattern=Ya),Ds.init(e,t)})),Gs=Wt("$ZodKSUID",((e,t)=>{t.pattern??(t.pattern=Ka),Ds.init(e,t)})),Xs=Wt("$ZodISODateTime",((e,t)=>{t.pattern??(t.pattern=function(e){const t=ps({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${us}T(?:${r})$`)}(t)),Ds.init(e,t)})),Qs=Wt("$ZodISODate",((e,t)=>{t.pattern??(t.pattern=ds),Ds.init(e,t)})),ei=Wt("$ZodISOTime",((e,t)=>{t.pattern??(t.pattern=new RegExp(`^${ps(t)}$`)),Ds.init(e,t)})),ti=Wt("$ZodISODuration",((e,t)=>{t.pattern??(t.pattern=Xa),Ds.init(e,t)})),ni=Wt("$ZodIPv4",((e,t)=>{t.pattern??(t.pattern=ns),Ds.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.format="ipv4"}))})),ri=Wt("$ZodIPv6",((e,t)=>{t.pattern??(t.pattern=rs),Ds.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.format="ipv6"})),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}})),ai=Wt("$ZodCIDRv4",((e,t)=>{t.pattern??(t.pattern=as),Ds.init(e,t)})),si=Wt("$ZodCIDRv6",((e,t)=>{t.pattern??(t.pattern=ss),Ds.init(e,t),e._zod.check=n=>{const[r,a]=n.value.split("/");try{if(!a)throw new Error;const e=Number(a);if(`${e}`!==a)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}}));function ii(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const oi=Wt("$ZodBase64",((e,t)=>{t.pattern??(t.pattern=is),Ds.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.contentEncoding="base64"})),e._zod.check=n=>{ii(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}));const ci=Wt("$ZodBase64URL",((e,t)=>{t.pattern??(t.pattern=os),Ds.init(e,t),e._zod.onattach.push((e=>{e._zod.bag.contentEncoding="base64url"})),e._zod.check=n=>{(function(e){if(!os.test(e))return!1;const t=e.replace(/[-_]/g,(e=>"-"===e?"+":"/"));return ii(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}})),li=Wt("$ZodE164",((e,t)=>{t.pattern??(t.pattern=ls),Ds.init(e,t)}));const ui=Wt("$ZodJWT",((e,t)=>{Ds.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&"JWT"!==a?.typ||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}})),di=Wt("$ZodNumber",((e,t)=>{js.init(e,t),e._zod.pattern=e._zod.bag.pattern??fs,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const a=n.value;if("number"==typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return n;const s="number"==typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...s?{received:s}:{}}),n}})),pi=Wt("$ZodNumber",((e,t)=>{Es.init(e,t),di.init(e,t)})),hi=Wt("$ZodBoolean",((e,t)=>{js.init(e,t),e._zod.pattern=ms,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const a=n.value;return"boolean"==typeof a||n.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),n}})),fi=Wt("$ZodNull",((e,t)=>{js.init(e,t),e._zod.pattern=gs,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}})),mi=Wt("$ZodUnknown",((e,t)=>{js.init(e,t),e._zod.parse=e=>e})),gi=Wt("$ZodNever",((e,t)=>{js.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}));function vi(e,t,n){e.issues.length&&t.issues.push(...jt(n,e.issues)),t.value[n]=e.value}const yi=Wt("$ZodArray",((e,t)=>{js.init(e,t),e._zod.parse=(n,r)=>{const a=n.value;if(!Array.isArray(a))return n.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),n;n.value=Array(a.length);const s=[];for(let e=0;e<a.length;e++){const i=a[e],o=t.element._zod.run({value:i,issues:[]},r);o instanceof Promise?s.push(o.then((t=>vi(t,n,e)))):vi(o,n,e)}return s.length?Promise.all(s).then((()=>n)):n}}));function bi(e,t,n){e.issues.length&&t.issues.push(...jt(n,e.issues)),t.value[n]=e.value}function _i(e,t,n,r){e.issues.length?void 0===r[n]?t.value[n]=n in r?void 0:e.value:t.issues.push(...jt(n,e.issues)):void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const ki=Wt("$ZodObject",((e,t)=>{js.init(e,t);const n=wt((()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof js))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(r=t.shape,Object.keys(r).filter((e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout)));var r;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}));St(e._zod,"propValues",(()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n}));let r;const a=Ct,s=!qt.jitless,i=s&&At.value,o=t.catchall;let c;e._zod.parse=(l,u)=>{c??(c=n.value);const d=l.value;if(!a(d))return l.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),l;const p=[];if(s&&i&&!1===u?.async&&!0!==u.jitless)r||(r=(e=>{const t=new Rs(["shape","payload","ctx"]),r=n.value,a=e=>{const t=Tt(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const s=Object.create(null);let i=0;for(const e of r.keys)s[e]="key_"+i++;t.write("const newResult = {}");for(const e of r.keys)if(r.optionalKeys.has(e)){const n=s[e];t.write(`const ${n} = ${a(e)};`);const r=Tt(e);t.write(`\n        if (${n}.issues.length) {\n          if (input[${r}] === undefined) {\n            if (${r} in input) {\n              newResult[${r}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${n}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${r}, ...iss.path] : [${r}],\n              }))\n            );\n          }\n        } else if (${n}.value === undefined) {\n          if (${r} in input) newResult[${r}] = undefined;\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        `)}else{const n=s[e];t.write(`const ${n} = ${a(e)};`),t.write(`\n          if (${n}.issues.length) payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${Tt(e)}, ...iss.path] : [${Tt(e)}]\n          })));`),t.write(`newResult[${Tt(e)}] = ${n}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,n)=>o(e,t,n)})(t.shape)),l=r(l,u);else{l.value={};const e=c.shape;for(const t of c.keys){const n=e[t],r=n._zod.run({value:d[t],issues:[]},u),a="optional"===n._zod.optin&&"optional"===n._zod.optout;r instanceof Promise?p.push(r.then((e=>a?_i(e,l,t,d):bi(e,l,t)))):a?_i(r,l,t,d):bi(r,l,t)}}if(!o)return p.length?Promise.all(p).then((()=>l)):l;const h=[],f=c.keySet,m=o._zod,g=m.def.type;for(const e of Object.keys(d)){if(f.has(e))continue;if("never"===g){h.push(e);continue}const t=m.run({value:d[e],issues:[]},u);t instanceof Promise?p.push(t.then((t=>bi(t,l,e)))):bi(t,l,e)}return h.length&&l.issues.push({code:"unrecognized_keys",keys:h,input:d,inst:e}),p.length?Promise.all(p).then((()=>l)):l}}));function wi(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map((e=>e.issues.map((e=>Dt(e,r,Ht())))))}),t}const xi=Wt("$ZodUnion",((e,t)=>{js.init(e,t),St(e._zod,"optin",(()=>t.options.some((e=>"optional"===e._zod.optin))?"optional":void 0)),St(e._zod,"optout",(()=>t.options.some((e=>"optional"===e._zod.optout))?"optional":void 0)),St(e._zod,"values",(()=>{if(t.options.every((e=>e._zod.values)))return new Set(t.options.flatMap((e=>Array.from(e._zod.values))))})),St(e._zod,"pattern",(()=>{if(t.options.every((e=>e._zod.pattern))){const e=t.options.map((e=>e._zod.pattern));return new RegExp(`^(${e.map((e=>Et(e.source))).join("|")})$`)}})),e._zod.parse=(n,r)=>{let a=!1;const s=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},r);if(t instanceof Promise)s.push(t),a=!0;else{if(0===t.issues.length)return t;s.push(t)}}return a?Promise.all(s).then((t=>wi(t,n,e,r))):wi(s,n,e,r)}})),Ei=Wt("$ZodDiscriminatedUnion",((e,t)=>{xi.init(e,t);const n=e._zod.parse;St(e._zod,"propValues",(()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e}));const r=wt((()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n}));e._zod.parse=(a,s)=>{const i=a.value;if(!Ct(i))return a.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),a;const o=r.value.get(i?.[t.discriminator]);return o?o._zod.run(a,s):t.unionFallback?n(a,s):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),a)}})),Si=Wt("$ZodIntersection",((e,t)=>{js.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,a=t.left._zod.run({value:r,issues:[]},n),s=t.right._zod.run({value:r,issues:[]},n);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then((([t,n])=>Ti(e,t,n))):Ti(e,a,s)}}));function Ii(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Zt(e)&&Zt(t)){const n=Object.keys(t),r=Object.keys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of r){const r=Ii(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};a[n]=r.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const a=Ii(e[r],t[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Ti(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Mt(e))return e;const r=Ii(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const zi=Wt("$ZodRecord",((e,t)=>{js.init(e,t),e._zod.parse=(n,r)=>{const a=n.value;if(!Zt(a))return n.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),n;const s=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;n.value={};for(const e of i)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const i=t.valueType._zod.run({value:a[e],issues:[]},r);i instanceof Promise?s.push(i.then((t=>{t.issues.length&&n.issues.push(...jt(e,t.issues)),n.value[e]=t.value}))):(i.issues.length&&n.issues.push(...jt(e,i.issues)),n.value[e]=i.value)}let o;for(const e in a)i.has(e)||(o=o??[],o.push(e));o&&o.length>0&&n.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:o})}else{n.value={};for(const i of Reflect.ownKeys(a)){if("__proto__"===i)continue;const o=t.keyType._zod.run({value:i,issues:[]},r);if(o instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(o.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:o.issues.map((e=>Dt(e,r,Ht()))),input:i,path:[i],inst:e}),n.value[o.value]=o.value;continue}const c=t.valueType._zod.run({value:a[i],issues:[]},r);c instanceof Promise?s.push(c.then((e=>{e.issues.length&&n.issues.push(...jt(i,e.issues)),n.value[o.value]=e.value}))):(c.issues.length&&n.issues.push(...jt(i,c.issues)),n.value[o.value]=c.value)}}return s.length?Promise.all(s).then((()=>n)):n}}));const Ci=Wt("$ZodEnum",((e,t)=>{js.init(e,t);const n=_t(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter((e=>$t.has(typeof e))).map((e=>"string"==typeof e?Ot(e):e.toString())).join("|")})$`),e._zod.parse=(t,r)=>{const a=t.value;return e._zod.values.has(a)||t.issues.push({code:"invalid_value",values:n,input:a,inst:e}),t}})),Ai=Wt("$ZodLiteral",((e,t)=>{js.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map((e=>"string"==typeof e?Ot(e):e?e.toString():String(e))).join("|")})$`),e._zod.parse=(n,r)=>{const a=n.value;return e._zod.values.has(a)||n.issues.push({code:"invalid_value",values:t.values,input:a,inst:e}),n}})),Zi=Wt("$ZodTransform",((e,t)=>{js.init(e,t),e._zod.parse=(e,n)=>{const r=t.transform(e.value,e);if(n.async){return(r instanceof Promise?r:Promise.resolve(r)).then((t=>(e.value=t,e)))}if(r instanceof Promise)throw new Jt;return e.value=r,e}})),$i=Wt("$ZodOptional",((e,t)=>{js.init(e,t),e._zod.optin="optional",e._zod.optout="optional",St(e._zod,"values",(()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0)),St(e._zod,"pattern",(()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Et(e.source)})?$`):void 0})),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)})),Oi=Wt("$ZodNullable",((e,t)=>{js.init(e,t),St(e._zod,"optin",(()=>t.innerType._zod.optin)),St(e._zod,"optout",(()=>t.innerType._zod.optout)),St(e._zod,"pattern",(()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Et(e.source)}|null)$`):void 0})),St(e._zod,"values",(()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0)),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)})),Ni=Wt("$ZodDefault",((e,t)=>{js.init(e,t),e._zod.optin="optional",St(e._zod,"values",(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((e=>Pi(e,t))):Pi(r,t)}}));function Pi(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Ri=Wt("$ZodPrefault",((e,t)=>{js.init(e,t),e._zod.optin="optional",St(e._zod,"values",(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))})),Mi=Wt("$ZodNonOptional",((e,t)=>{js.init(e,t),St(e._zod,"values",(()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter((e=>void 0!==e))):void 0})),e._zod.parse=(n,r)=>{const a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then((t=>ji(t,e))):ji(a,e)}}));function ji(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Fi=Wt("$ZodCatch",((e,t)=>{js.init(e,t),e._zod.optin="optional",St(e._zod,"optout",(()=>t.innerType._zod.optout)),St(e._zod,"values",(()=>t.innerType._zod.values)),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then((r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map((e=>Dt(e,n,Ht())))},input:e.value}),e.issues=[]),e))):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map((e=>Dt(e,n,Ht())))},input:e.value}),e.issues=[]),e)}})),Di=Wt("$ZodPipe",((e,t)=>{js.init(e,t),St(e._zod,"values",(()=>t.in._zod.values)),St(e._zod,"optin",(()=>t.in._zod.optin)),St(e._zod,"optout",(()=>t.out._zod.optout)),e._zod.parse=(e,n)=>{const r=t.in._zod.run(e,n);return r instanceof Promise?r.then((e=>Li(e,t,n))):Li(r,t,n)}}));function Li(e,t,n){return Mt(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const Ui=Wt("$ZodReadonly",((e,t)=>{js.init(e,t),St(e._zod,"propValues",(()=>t.innerType._zod.propValues)),St(e._zod,"values",(()=>t.innerType._zod.values)),St(e._zod,"optin",(()=>t.innerType._zod.optin)),St(e._zod,"optout",(()=>t.innerType._zod.optout)),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Vi):Vi(r)}}));function Vi(e){return e.value=Object.freeze(e.value),e}const Bi=Wt("$ZodLazy",((e,t)=>{js.init(e,t),St(e._zod,"innerType",(()=>t.getter())),St(e._zod,"pattern",(()=>e._zod.innerType._zod.pattern)),St(e._zod,"propValues",(()=>e._zod.innerType._zod.propValues)),St(e._zod,"optin",(()=>e._zod.innerType._zod.optin)),St(e._zod,"optout",(()=>e._zod.innerType._zod.optout)),e._zod.parse=(t,n)=>e._zod.innerType._zod.run(t,n)})),Wi=Wt("$ZodCustom",((e,t)=>{bs.init(e,t),js.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,a=t.fn(r);if(a instanceof Promise)return a.then((t=>Ji(t,n,r,e)));Ji(a,n,r,e)}}));function Ji(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(Ut(e))}}function qi(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Pt(t)})}function Hi(e,t){return new ks({check:"less_than",...Pt(t),value:e,inclusive:!1})}function Yi(e,t){return new ks({check:"less_than",...Pt(t),value:e,inclusive:!0})}function Ki(e,t){return new ws({check:"greater_than",...Pt(t),value:e,inclusive:!1})}function Gi(e,t){return new ws({check:"greater_than",...Pt(t),value:e,inclusive:!0})}function Xi(e,t){return new xs({check:"multiple_of",...Pt(t),value:e})}function Qi(e,t){return new Ss({check:"max_length",...Pt(t),maximum:e})}function eo(e,t){return new Is({check:"min_length",...Pt(t),minimum:e})}function to(e,t){return new Ts({check:"length_equals",...Pt(t),length:e})}function no(e){return new Ps({check:"overwrite",tx:e})}const ro=Wt("ZodISODateTime",((e,t)=>{Xs.init(e,t),go.init(e,t)}));function ao(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Pt(t)})}(ro,e)}const so=Wt("ZodISODate",((e,t)=>{Qs.init(e,t),go.init(e,t)}));function io(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...Pt(t)})}(so,e)}const oo=Wt("ZodISOTime",((e,t)=>{ei.init(e,t),go.init(e,t)}));function co(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Pt(t)})}(oo,e)}const lo=Wt("ZodISODuration",((e,t)=>{ti.init(e,t),go.init(e,t)}));function uo(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...Pt(t)})}(lo,e)}const po=Wt("ZodType",((e,t)=>(js.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map((e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e))]}),e.clone=(t,n)=>Nt(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>on(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>ln(e,t,n),e.parseAsync=async(t,n)=>cn(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>un(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...Pt(n)})}(Ec,e,t)}(t,n)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new bs({check:"custom"});return t._zod.check=e,t}((n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(Ut(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Ut(r))}},e(n.value,n))));return t}(t)),e.overwrite=t=>e.check(no(t)),e.optional=()=>pc(e),e.nullable=()=>fc(e),e.nullish=()=>pc(fc(e)),e.nonoptional=t=>function(e,t){return new vc({type:"nonoptional",innerType:e,...Pt(t)})}(e,t),e.array=()=>Yo(e),e.or=t=>ec([e,t]),e.and=t=>new nc({type:"intersection",left:e,right:t}),e.transform=t=>_c(e,uc(t)),e.default=t=>{return n=t,new mc({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.prefault=t=>{return n=t,new gc({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.catch=t=>{return new yc({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>_c(e,t),e.readonly=()=>new kc({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return bt.add(n,{description:t}),n},Object.defineProperty(e,"description",{get(){return bt.get(e)?.description},configurable:!0}),e.meta=(...t)=>{if(0===t.length)return bt.get(e);const n=e.clone();return bt.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e))),ho=Wt("_ZodString",((e,t)=>{Fs.init(e,t),po.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new Cs({check:"string_format",format:"regex",...Pt(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new $s({check:"string_format",format:"includes",...Pt(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new Os({check:"string_format",format:"starts_with",...Pt(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Ns({check:"string_format",format:"ends_with",...Pt(t),suffix:e})}(...t)),e.min=(...t)=>e.check(eo(...t)),e.max=(...t)=>e.check(Qi(...t)),e.length=(...t)=>e.check(to(...t)),e.nonempty=(...t)=>e.check(eo(1,...t)),e.lowercase=t=>e.check(function(e){return new As({check:"string_format",format:"lowercase",...Pt(e)})}(t)),e.uppercase=t=>e.check(function(e){return new Zs({check:"string_format",format:"uppercase",...Pt(e)})}(t)),e.trim=()=>e.check(no((e=>e.trim()))),e.normalize=(...t)=>e.check(function(e){return no((t=>t.normalize(e)))}(...t)),e.toLowerCase=()=>e.check(no((e=>e.toLowerCase()))),e.toUpperCase=()=>e.check(no((e=>e.toUpperCase())))})),fo=Wt("ZodString",((e,t)=>{Fs.init(e,t),ho.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Pt(t)})}(vo,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Pt(t)})}(_o,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Pt(t)})}(Po,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Pt(t)})}(ko,t)),e.guid=t=>e.check(qi(yo,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Pt(t)})}(bo,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Pt(t)})}(bo,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Pt(t)})}(bo,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Pt(t)})}(bo,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Pt(t)})}(wo,t)),e.guid=t=>e.check(qi(yo,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Pt(t)})}(xo,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Pt(t)})}(Eo,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Pt(t)})}(So,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Pt(t)})}($o,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Pt(t)})}(Oo,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Pt(t)})}(Io,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Pt(t)})}(To,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Pt(t)})}(zo,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Pt(t)})}(Co,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Pt(t)})}(Ao,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Pt(t)})}(Zo,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Pt(t)})}(No,t)),e.datetime=t=>e.check(ao(t)),e.date=t=>e.check(io(t)),e.time=t=>e.check(co(t)),e.duration=t=>e.check(uo(t))}));function mo(e){return function(e,t){return new e({type:"string",...Pt(t)})}(fo,e)}const go=Wt("ZodStringFormat",((e,t)=>{Ds.init(e,t),ho.init(e,t)})),vo=Wt("ZodEmail",((e,t)=>{Vs.init(e,t),go.init(e,t)}));const yo=Wt("ZodGUID",((e,t)=>{Ls.init(e,t),go.init(e,t)}));const bo=Wt("ZodUUID",((e,t)=>{Us.init(e,t),go.init(e,t)}));const _o=Wt("ZodURL",((e,t)=>{Bs.init(e,t),go.init(e,t)}));const ko=Wt("ZodEmoji",((e,t)=>{Ws.init(e,t),go.init(e,t)}));const wo=Wt("ZodNanoID",((e,t)=>{Js.init(e,t),go.init(e,t)}));const xo=Wt("ZodCUID",((e,t)=>{qs.init(e,t),go.init(e,t)}));const Eo=Wt("ZodCUID2",((e,t)=>{Hs.init(e,t),go.init(e,t)}));const So=Wt("ZodULID",((e,t)=>{Ys.init(e,t),go.init(e,t)}));const Io=Wt("ZodXID",((e,t)=>{Ks.init(e,t),go.init(e,t)}));const To=Wt("ZodKSUID",((e,t)=>{Gs.init(e,t),go.init(e,t)}));const zo=Wt("ZodIPv4",((e,t)=>{ni.init(e,t),go.init(e,t)}));const Co=Wt("ZodIPv6",((e,t)=>{ri.init(e,t),go.init(e,t)}));const Ao=Wt("ZodCIDRv4",((e,t)=>{ai.init(e,t),go.init(e,t)}));const Zo=Wt("ZodCIDRv6",((e,t)=>{si.init(e,t),go.init(e,t)}));const $o=Wt("ZodBase64",((e,t)=>{oi.init(e,t),go.init(e,t)}));const Oo=Wt("ZodBase64URL",((e,t)=>{ci.init(e,t),go.init(e,t)}));const No=Wt("ZodE164",((e,t)=>{li.init(e,t),go.init(e,t)}));const Po=Wt("ZodJWT",((e,t)=>{ui.init(e,t),go.init(e,t)}));const Ro=Wt("ZodNumber",((e,t)=>{di.init(e,t),po.init(e,t),e.gt=(t,n)=>e.check(Ki(t,n)),e.gte=(t,n)=>e.check(Gi(t,n)),e.min=(t,n)=>e.check(Gi(t,n)),e.lt=(t,n)=>e.check(Hi(t,n)),e.lte=(t,n)=>e.check(Yi(t,n)),e.max=(t,n)=>e.check(Yi(t,n)),e.int=t=>e.check(Fo(t)),e.safe=t=>e.check(Fo(t)),e.positive=t=>e.check(Ki(0,t)),e.nonnegative=t=>e.check(Gi(0,t)),e.negative=t=>e.check(Hi(0,t)),e.nonpositive=t=>e.check(Yi(0,t)),e.multipleOf=(t,n)=>e.check(Xi(t,n)),e.step=(t,n)=>e.check(Xi(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null}));function Mo(e){return function(e,t){return new e({type:"number",checks:[],...Pt(t)})}(Ro,e)}const jo=Wt("ZodNumberFormat",((e,t)=>{pi.init(e,t),Ro.init(e,t)}));function Fo(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Pt(t)})}(jo,e)}const Do=Wt("ZodBoolean",((e,t)=>{hi.init(e,t),po.init(e,t)}));function Lo(e){return function(e,t){return new e({type:"boolean",...Pt(t)})}(Do,e)}const Uo=Wt("ZodNull",((e,t)=>{fi.init(e,t),po.init(e,t)}));function Vo(e){return function(e,t){return new e({type:"null",...Pt(t)})}(Uo,e)}const Bo=Wt("ZodUnknown",((e,t)=>{mi.init(e,t),po.init(e,t)}));function Wo(){return function(e){return new e({type:"unknown"})}(Bo)}const Jo=Wt("ZodNever",((e,t)=>{gi.init(e,t),po.init(e,t)}));function qo(e){return function(e,t){return new e({type:"never",...Pt(t)})}(Jo,e)}const Ho=Wt("ZodArray",((e,t)=>{yi.init(e,t),po.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(eo(t,n)),e.nonempty=t=>e.check(eo(1,t)),e.max=(t,n)=>e.check(Qi(t,n)),e.length=(t,n)=>e.check(to(t,n)),e.unwrap=()=>e.element}));function Yo(e,t){return function(e,t,n){return new e({type:"array",element:t,...Pt(n)})}(Ho,e,t)}const Ko=Wt("ZodObject",((e,t)=>{ki.init(e,t),po.init(e,t),St(e,"shape",(()=>t.shape)),e.keyof=()=>ic(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Wo()}),e.loose=()=>e.clone({...e._zod.def,catchall:Wo()}),e.strict=()=>e.clone({...e._zod.def,catchall:qo()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!Zt(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return It(this,"shape",n),n},checks:[]};return Nt(e,n)}(e,t),e.merge=t=>{return r=t,Nt(n=e,{...n._zod.def,get shape(){const e={...n._zod.def.shape,...r._zod.def.shape};return It(this,"shape",e),e},catchall:r._zod.def.catchall,checks:[]});var n,r},e.pick=t=>function(e,t){const n={},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(n[e]=r.shape[e])}return Nt(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.omit=t=>function(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return Nt(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.partial=(...t)=>function(e,t,n){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)a[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return Nt(t,{...t._zod.def,shape:a,checks:[]})}(dc,e,t[0]),e.required=(...t)=>function(e,t,n){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in a))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)a[t]=new e({type:"nonoptional",innerType:r[t]});return Nt(t,{...t._zod.def,shape:a,checks:[]})}(vc,e,t[0])}));function Go(e,t){const n={type:"object",get shape(){return It(this,"shape",{...e}),this.shape},...Pt(t)};return new Ko(n)}function Xo(e,t){return new Ko({type:"object",get shape(){return It(this,"shape",{...e}),this.shape},catchall:qo(),...Pt(t)})}const Qo=Wt("ZodUnion",((e,t)=>{xi.init(e,t),po.init(e,t),e.options=t.options}));function ec(e,t){return new Qo({type:"union",options:e,...Pt(t)})}const tc=Wt("ZodDiscriminatedUnion",((e,t)=>{Qo.init(e,t),Ei.init(e,t)}));const nc=Wt("ZodIntersection",((e,t)=>{Si.init(e,t),po.init(e,t)}));const rc=Wt("ZodRecord",((e,t)=>{zi.init(e,t),po.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType}));function ac(e,t,n){return new rc({type:"record",keyType:e,valueType:t,...Pt(n)})}const sc=Wt("ZodEnum",((e,t)=>{Ci.init(e,t),po.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const a={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);a[r]=t.entries[r]}return new sc({...t,checks:[],...Pt(r),entries:a})},e.exclude=(e,r)=>{const a={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete a[t]}return new sc({...t,checks:[],...Pt(r),entries:a})}}));function ic(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map((e=>[e,e]))):e;return new sc({type:"enum",entries:n,...Pt(t)})}const oc=Wt("ZodLiteral",((e,t)=>{Ai.init(e,t),po.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})}));function cc(e,t){return new oc({type:"literal",values:Array.isArray(e)?e:[e],...Pt(t)})}const lc=Wt("ZodTransform",((e,t)=>{Zi.init(e,t),po.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=r=>{if("string"==typeof r)n.issues.push(Ut(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),n.issues.push(Ut(t))}};const a=t.transform(n.value,n);return a instanceof Promise?a.then((e=>(n.value=e,n))):(n.value=a,n)}}));function uc(e){return new lc({type:"transform",transform:e})}const dc=Wt("ZodOptional",((e,t)=>{$i.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function pc(e){return new dc({type:"optional",innerType:e})}const hc=Wt("ZodNullable",((e,t)=>{Oi.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType}));function fc(e){return new hc({type:"nullable",innerType:e})}const mc=Wt("ZodDefault",((e,t)=>{Ni.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}));const gc=Wt("ZodPrefault",((e,t)=>{Ri.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType}));const vc=Wt("ZodNonOptional",((e,t)=>{Mi.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType}));const yc=Wt("ZodCatch",((e,t)=>{Fi.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}));const bc=Wt("ZodPipe",((e,t)=>{Di.init(e,t),po.init(e,t),e.in=t.in,e.out=t.out}));function _c(e,t){return new bc({type:"pipe",in:e,out:t})}const kc=Wt("ZodReadonly",((e,t)=>{Ui.init(e,t),po.init(e,t)}));const wc=Wt("ZodLazy",((e,t)=>{Bi.init(e,t),po.init(e,t),e.unwrap=()=>e._zod.def.getter()}));function xc(e){return new wc({type:"lazy",getter:e})}const Ec=Wt("ZodCustom",((e,t)=>{Wi.init(e,t),po.init(e,t)}));function Sc(e,t){return function(e,t,n){const r=Pt(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}(Ec,e??(()=>!0),t)}function Ic(e,t={error:`Input not instance of ${e.name}`}){const n=new Ec({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...Pt(t)});return n._zod.bag.Class=e,n}var Tc=Object.defineProperty,zc="AI_NoOutputSpecifiedError",Cc=`vercel.ai.error.${zc}`,Ac=Symbol.for(Cc);var Zc="AI_InvalidArgumentError",$c=`vercel.ai.error.${Zc}`,Oc=Symbol.for($c);var Nc="AI_InvalidStreamPartError",Pc=`vercel.ai.error.${Nc}`,Rc=Symbol.for(Pc);var Mc="AI_InvalidToolInputError",jc=`vercel.ai.error.${Mc}`,Fc=Symbol.for(jc);var Dc="AI_NoImageGeneratedError",Lc=`vercel.ai.error.${Dc}`,Uc=Symbol.for(Lc);var Vc,Bc="AI_NoObjectGeneratedError",Wc=`vercel.ai.error.${Bc}`,Jc=Symbol.for(Wc),qc=class extends _e{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a,finishReason:s}){super({name:Bc,message:e,cause:t}),this[Vc]=!0,this.text=n,this.response=r,this.usage=a,this.finishReason=s}static isInstance(e){return _e.hasMarker(e,Wc)}};Vc=Jc;var Hc="AI_NoOutputGeneratedError",Yc=`vercel.ai.error.${Hc}`,Kc=Symbol.for(Yc);var Gc="AI_NoSuchToolError",Xc=`vercel.ai.error.${Gc}`,Qc=Symbol.for(Xc);var el="AI_ToolCallRepairError",tl=`vercel.ai.error.${el}`,nl=Symbol.for(tl);var rl="AI_InvalidDataContentError",al=`vercel.ai.error.${rl}`,sl=Symbol.for(al);var il="AI_InvalidMessageRoleError",ol=`vercel.ai.error.${il}`,cl=Symbol.for(ol);var ll="AI_MessageConversionError",ul=`vercel.ai.error.${ll}`,dl=Symbol.for(ul);var pl="AI_DownloadError",hl=`vercel.ai.error.${pl}`,fl=Symbol.for(hl);var ml="AI_RetryError",gl=`vercel.ai.error.${ml}`,vl=Symbol.for(gl);var yl="5.0.98";var bl=ec([mo(),Ic(Uint8Array),Ic(ArrayBuffer),Sc((e=>{var t,n;return null!=(n=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&n}),{message:"Must be a Buffer"})]);var _l,kl,wl,xl=xc((()=>ec([Vo(),mo(),Mo(),Lo(),ac(mo(),xl),Yo(xl)]))),El=ac(mo(),ac(mo(),xl)),Sl=Go({type:cc("text"),text:mo(),providerOptions:El.optional()}),Il=Go({type:cc("image"),image:ec([bl,Ic(URL)]),mediaType:mo().optional(),providerOptions:El.optional()}),Tl=Go({type:cc("file"),data:ec([bl,Ic(URL)]),filename:mo().optional(),mediaType:mo(),providerOptions:El.optional()}),zl=Go({type:cc("reasoning"),text:mo(),providerOptions:El.optional()}),Cl=Go({type:cc("tool-call"),toolCallId:mo(),toolName:mo(),input:Wo(),providerOptions:El.optional(),providerExecuted:Lo().optional()}),Al=(_l="type",kl=[Go({type:cc("text"),value:mo()}),Go({type:cc("json"),value:xl}),Go({type:cc("error-text"),value:mo()}),Go({type:cc("error-json"),value:xl}),Go({type:cc("content"),value:Yo(ec([Go({type:cc("text"),text:mo()}),Go({type:cc("media"),data:mo(),mediaType:mo()})]))})],new tc({type:"union",options:kl,discriminator:_l,...Pt(wl)})),Zl=Go({type:cc("tool-result"),toolCallId:mo(),toolName:mo(),output:Al,providerOptions:El.optional()}),$l=Go({role:cc("system"),content:mo(),providerOptions:El.optional()}),Ol=Go({role:cc("user"),content:ec([mo(),Yo(ec([Sl,Il,Tl]))]),providerOptions:El.optional()}),Nl=Go({role:cc("assistant"),content:ec([mo(),Yo(ec([Sl,Tl,zl,Cl,Zl]))]),providerOptions:El.optional()}),Pl=Go({role:cc("tool"),content:Yo(Zl),providerOptions:El.optional()});ec([$l,Ol,Nl,Pl]);Lr({prefix:"aitxt",size:24});var Rl=Gr((()=>Da(ec([Xo({type:cc("text-start"),id:mo(),providerMetadata:El.optional()}),Xo({type:cc("text-delta"),id:mo(),delta:mo(),providerMetadata:El.optional()}),Xo({type:cc("text-end"),id:mo(),providerMetadata:El.optional()}),Xo({type:cc("error"),errorText:mo()}),Xo({type:cc("tool-input-start"),toolCallId:mo(),toolName:mo(),providerExecuted:Lo().optional(),dynamic:Lo().optional()}),Xo({type:cc("tool-input-delta"),toolCallId:mo(),inputTextDelta:mo()}),Xo({type:cc("tool-input-available"),toolCallId:mo(),toolName:mo(),input:Wo(),providerExecuted:Lo().optional(),providerMetadata:El.optional(),dynamic:Lo().optional()}),Xo({type:cc("tool-input-error"),toolCallId:mo(),toolName:mo(),input:Wo(),providerExecuted:Lo().optional(),providerMetadata:El.optional(),dynamic:Lo().optional(),errorText:mo()}),Xo({type:cc("tool-output-available"),toolCallId:mo(),output:Wo(),providerExecuted:Lo().optional(),dynamic:Lo().optional(),preliminary:Lo().optional()}),Xo({type:cc("tool-output-error"),toolCallId:mo(),errorText:mo(),providerExecuted:Lo().optional(),dynamic:Lo().optional()}),Xo({type:cc("reasoning-start"),id:mo(),providerMetadata:El.optional()}),Xo({type:cc("reasoning-delta"),id:mo(),delta:mo(),providerMetadata:El.optional()}),Xo({type:cc("reasoning-end"),id:mo(),providerMetadata:El.optional()}),Xo({type:cc("source-url"),sourceId:mo(),url:mo(),title:mo().optional(),providerMetadata:El.optional()}),Xo({type:cc("source-document"),sourceId:mo(),mediaType:mo(),title:mo(),filename:mo().optional(),providerMetadata:El.optional()}),Xo({type:cc("file"),url:mo(),mediaType:mo(),providerMetadata:El.optional()}),Xo({type:Sc((e=>"string"==typeof e&&e.startsWith("data-")),{message:'Type must start with "data-"'}),id:mo().optional(),data:Wo(),transient:Lo().optional()}),Xo({type:cc("start-step")}),Xo({type:cc("finish-step")}),Xo({type:cc("start"),messageId:mo().optional(),messageMetadata:Wo().optional()}),Xo({type:cc("finish"),finishReason:ic(["stop","length","content-filter","tool-calls","error","other","unknown"]).optional(),messageMetadata:Wo().optional()}),Xo({type:cc("abort")}),Xo({type:cc("message-metadata"),messageMetadata:Wo()})]))));function Ml(e,t){if(void 0===e&&void 0===t)return;if(void 0===e)return t;if(void 0===t)return e;const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const a=t[r];if(void 0===a)continue;const s=r in e?e[r]:void 0,i=!(null===a||"object"!=typeof a||Array.isArray(a)||a instanceof Date||a instanceof RegExp),o=!(null==s||"object"!=typeof s||Array.isArray(s)||s instanceof Date||s instanceof RegExp);n[r]=i&&o?Ml(s,a):a}return n}function jl(e){const t=["ROOT"];let n=-1,r=null;function a(e,a,s){switch(e){case'"':n=a,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":n=a,r=a,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=a,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":n=a,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":n=a,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":n=r,t.pop()}}function i(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=r,t.pop()}}for(let o=0;o<e.length;o++){const c=e[o];switch(t[t.length-1]){case"ROOT":a(c,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(c){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":n=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":if('"'===c)t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"INSIDE_OBJECT_KEY":if('"'===c)t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break;case"INSIDE_OBJECT_AFTER_KEY":if(":"===c)t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break;case"INSIDE_OBJECT_BEFORE_VALUE":a(c,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(c,o);break;case"INSIDE_STRING":switch(c){case'"':t.pop(),n=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:n=o}break;case"INSIDE_ARRAY_START":if("]"===c)n=o,t.pop();else n=o,a(c,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_ARRAY_AFTER_VALUE":switch(c){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=o,t.pop();break;default:n=o}break;case"INSIDE_ARRAY_AFTER_COMMA":a(c,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),n=o;break;case"INSIDE_NUMBER":switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(c,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(c,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(c,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(c,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{const a=e.substring(r,o+1);"false".startsWith(a)||"true".startsWith(a)||"null".startsWith(a)?n=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(c,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(c,o));break}}}let o=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--){switch(t[n]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{const t=e.substring(r,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}}return o}async function Fl(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await ta({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await ta({text:jl(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function Dl(e){return e.type.startsWith("tool-")}function Ll(e){return"dynamic-tool"===e.type}function Ul(e){return Dl(e)||Ll(e)}function Vl(e){return e.type.split("-").slice(1).join("-")}function Bl({lastMessage:e,messageId:t}){return{message:"assistant"===(null==e?void 0:e.role)?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Wl({stream:e,messageMetadataSchema:t,dataPartSchemas:n,runUpdateMessageJob:r,onError:a,onToolCall:s,onData:i}){return e.pipeThrough(new TransformStream({async transform(e,o){await r((async({state:r,write:c})=>{var l,u,d,p;function h(e){const t=r.message.parts.filter(Dl).find((t=>t.toolCallId===e));if(null==t)throw new Error("tool-output-error must be preceded by a tool-input-available");return t}function f(e){const t=r.message.parts.filter((e=>"dynamic-tool"===e.type)).find((t=>t.toolCallId===e));if(null==t)throw new Error("tool-output-error must be preceded by a tool-input-available");return t}function m(e){var t;const n=r.message.parts.find((t=>Dl(t)&&t.toolCallId===e.toolCallId)),a=e,s=n;null!=n?(n.state=e.state,s.input=a.input,s.output=a.output,s.errorText=a.errorText,s.rawInput=a.rawInput,s.preliminary=a.preliminary,s.providerExecuted=null!=(t=a.providerExecuted)?t:n.providerExecuted,null!=a.providerMetadata&&"input-available"===n.state&&(n.callProviderMetadata=a.providerMetadata)):r.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,input:a.input,output:a.output,rawInput:a.rawInput,errorText:a.errorText,providerExecuted:a.providerExecuted,preliminary:a.preliminary,...null!=a.providerMetadata?{callProviderMetadata:a.providerMetadata}:{}})}function g(e){var t,n;const a=r.message.parts.find((t=>"dynamic-tool"===t.type&&t.toolCallId===e.toolCallId)),s=e,i=a;null!=a?(a.state=e.state,i.toolName=e.toolName,i.input=s.input,i.output=s.output,i.errorText=s.errorText,i.rawInput=null!=(t=s.rawInput)?t:i.rawInput,i.preliminary=s.preliminary,i.providerExecuted=null!=(n=s.providerExecuted)?n:a.providerExecuted,null!=s.providerMetadata&&"input-available"===a.state&&(a.callProviderMetadata=s.providerMetadata)):r.message.parts.push({type:"dynamic-tool",toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:s.input,output:s.output,errorText:s.errorText,preliminary:s.preliminary,providerExecuted:s.providerExecuted,...null!=s.providerMetadata?{callProviderMetadata:s.providerMetadata}:{}})}async function v(e){if(null!=e){const n=null!=r.message.metadata?Ml(r.message.metadata,e):e;null!=t&&await Qr({value:n,schema:t}),r.message.metadata=n}}switch(e.type){case"text-start":{const t={type:"text",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeTextParts[e.id]=t,r.message.parts.push(t),c();break}case"text-delta":{const t=r.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(l=e.providerMetadata)?l:t.providerMetadata,c();break}case"text-end":{const t=r.activeTextParts[e.id];t.state="done",t.providerMetadata=null!=(u=e.providerMetadata)?u:t.providerMetadata,delete r.activeTextParts[e.id],c();break}case"reasoning-start":{const t={type:"reasoning",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeReasoningParts[e.id]=t,r.message.parts.push(t),c();break}case"reasoning-delta":{const t=r.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(d=e.providerMetadata)?d:t.providerMetadata,c();break}case"reasoning-end":{const t=r.activeReasoningParts[e.id];t.providerMetadata=null!=(p=e.providerMetadata)?p:t.providerMetadata,t.state="done",delete r.activeReasoningParts[e.id],c();break}case"file":r.message.parts.push({type:"file",mediaType:e.mediaType,url:e.url}),c();break;case"source-url":r.message.parts.push({type:"source-url",sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),c();break;case"source-document":r.message.parts.push({type:"source-document",sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),c();break;case"tool-input-start":{const t=r.message.parts.filter(Dl);r.partialToolCalls[e.toolCallId]={text:"",toolName:e.toolName,index:t.length,dynamic:e.dynamic},e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted}),c();break}case"tool-input-delta":{const t=r.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;const{value:n}=await Fl(t.text);t.dynamic?g({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:n}):m({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:n}),c();break}case"tool-input-available":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c(),s&&!e.providerExecuted&&await s({toolCall:e});break;case"tool-input-error":e.dynamic?g({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):m({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),c();break;case"tool-output-available":if(e.dynamic){const t=f(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-available",input:t.input,output:e.output,preliminary:e.preliminary})}else{const t=h(e.toolCallId);m({toolCallId:e.toolCallId,toolName:Vl(t),state:"output-available",input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary})}c();break;case"tool-output-error":if(e.dynamic){const t=f(e.toolCallId);g({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-error",input:t.input,errorText:e.errorText,providerExecuted:e.providerExecuted})}else{const t=h(e.toolCallId);m({toolCallId:e.toolCallId,toolName:Vl(t),state:"output-error",input:t.input,rawInput:t.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted})}c();break;case"start-step":r.message.parts.push({type:"step-start"});break;case"finish-step":r.activeTextParts={},r.activeReasoningParts={};break;case"start":null!=e.messageId&&(r.message.id=e.messageId),await v(e.messageMetadata),null==e.messageId&&null==e.messageMetadata||c();break;case"finish":null!=e.finishReason&&(r.finishReason=e.finishReason),await v(e.messageMetadata),null!=e.messageMetadata&&c();break;case"message-metadata":await v(e.messageMetadata),null!=e.messageMetadata&&c();break;case"error":null==a||a(new Error(e.errorText));break;default:if(function(e){return e.type.startsWith("data-")}(e)){null!=(null==n?void 0:n[e.type])&&await Qr({value:e.data,schema:n[e.type]});const t=e;if(t.transient){null==i||i(t);break}const a=null!=t.id?r.message.parts.find((e=>t.type===e.type&&t.id===e.id)):void 0;null!=a?a.data=t.data:r.message.parts.push(t),null==i||i(t),c()}}o.enqueue(e)}))}}))}async function Jl({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:e}=await n.read();if(e)break}}catch(e){null==t||t(e)}finally{n.releaseLock()}}Lr({prefix:"aitxt",size:24});Lr({prefix:"aiobj",size:24});Lr({prefix:"aiobj",size:24});((e,t)=>{for(var n in t)Tc(e,n,{get:t[n],enumerable:!0})})({},{object:()=>Hl,text:()=>ql});var ql=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),Hl=({schema:e})=>{const t=Va(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:e}){const t=await Fl(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{const e=t.state;throw new Error(`Unsupported parse state: ${e}`)}}},async parseOutput({text:e},n){const r=await ta({text:e});if(!r.success)throw new qc({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});const a=await ea({value:r.value,schema:t});if(!a.success)throw new qc({message:"No object generated: response did not match schema.",cause:a.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});return a.value}}};var Yl="AI_NoSuchProviderError",Kl=`vercel.ai.error.${Yl}`,Gl=Symbol.for(Kl);var Xl=class{constructor({api:e="/api/chat",credentials:t,headers:n,body:r,fetch:a,prepareSendMessagesRequest:s,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=n,this.body=r,this.fetch=a,this.prepareSendMessagesRequest=s,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var n,r,a,s,i;const o=await ra(this.body),c=await ra(this.headers),l=await ra(this.credentials),u={...Br(c),...Br(t.headers)},d=await(null==(n=this.prepareSendMessagesRequest)?void 0:n.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:u,credentials:l,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),p=null!=(r=null==d?void 0:d.api)?r:this.api,h=void 0!==(null==d?void 0:d.headers)?Br(d.headers):u,f=void 0!==(null==d?void 0:d.body)?d.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},m=null!=(a=null==d?void 0:d.credentials)?a:l,g=null!=(s=this.fetch)?s:globalThis.fetch,v=await g(p,{method:"POST",headers:Wr({"Content-Type":"application/json",...h},`ai-sdk/${yl}`,Vr()),body:JSON.stringify(f),credentials:m,signal:e});if(!v.ok)throw new Error(null!=(i=await v.text())?i:"Failed to fetch the chat response.");if(!v.body)throw new Error("The response body is empty.");return this.processResponseStream(v.body)}async reconnectToStream(e){var t,n,r,a,s;const i=await ra(this.body),o=await ra(this.headers),c=await ra(this.credentials),l={...Br(o),...Br(e.headers)},u=await(null==(t=this.prepareReconnectToStreamRequest)?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:l,credentials:c,requestMetadata:e.metadata})),d=null!=(n=null==u?void 0:u.api)?n:`${this.api}/${e.chatId}/stream`,p=void 0!==(null==u?void 0:u.headers)?Br(u.headers):l,h=null!=(r=null==u?void 0:u.credentials)?r:c,f=null!=(a=this.fetch)?a:globalThis.fetch,m=await f(d,{method:"GET",headers:Wr(p,`ai-sdk/${yl}`,Vr()),credentials:h});if(204===m.status)return null;if(!m.ok)throw new Error(null!=(s=await m.text())?s:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");return this.processResponseStream(m.body)}},Ql=class extends Xl{constructor(e={}){super(e)}processResponseStream(e){return na({stream:e,schema:Rl}).pipeThrough(new TransformStream({async transform(e,t){if(!e.success)throw e.error;t.enqueue(e.value)}}))}},eu=class{constructor({generateId:e=Ur,id:t=e(),transport:n=new Ql,messageMetadataSchema:r,dataPartSchemas:a,state:s,onError:i,onToolCall:o,onFinish:c,onData:l,sendAutomaticallyWhen:u}){this.activeResponse=void 0,this.jobExecutor=new class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise(((t,n)=>{this.queue.push((async()=>{try{await e(),t()}catch(e){n(e)}})),this.processQueue()}))}},this.sendMessage=async(e,t)=>{var n,r,a,s;if(null==e)return void await this.makeRequest({trigger:"submit-message",messageId:null==(n=this.lastMessage)?void 0:n.id,...t});let i;if("text"in e||"files"in e){const t=Array.isArray(e.files)?e.files:await async function(e){if(null==e)return[];if(!(globalThis.FileList&&e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map((async e=>{const{name:t,type:n}=e;return{type:"file",mediaType:n,filename:t,url:await new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>n(e),r.readAsDataURL(e)}))}})))}(e.files);i={parts:[...t,..."text"in e&&null!=e.text?[{type:"text",text:e.text}]:[]]}}else i=e;if(null!=e.messageId){const t=this.state.messages.findIndex((t=>t.id===e.messageId));if(-1===t)throw new Error(`message with id ${e.messageId} not found`);if("user"!==this.state.messages[t].role)throw new Error(`message with id ${e.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,t+1),this.state.replaceMessage(t,{...i,id:e.messageId,role:null!=(r=i.role)?r:"user",metadata:e.metadata})}else this.state.pushMessage({...i,id:null!=(a=i.id)?a:this.generateId(),role:null!=(s=i.role)?s:"user",metadata:e.metadata});await this.makeRequest({trigger:"submit-message",messageId:e.messageId,...t})},this.regenerate=async({messageId:e,...t}={})=>{const n=null==e?this.state.messages.length-1:this.state.messages.findIndex((t=>t.id===e));if(-1===n)throw new Error(`message ${e} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[n].role?n:n+1),await this.makeRequest({trigger:"regenerate-message",messageId:e,...t})},this.resumeStream=async(e={})=>{await this.makeRequest({trigger:"resume-stream",...e})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolOutput=async({state:e="output-available",tool:t,toolCallId:n,output:r,errorText:a})=>this.jobExecutor.run((async()=>{var t,s;const i=this.state.messages,o=i[i.length-1];this.state.replaceMessage(i.length-1,{...o,parts:o.parts.map((t=>Ul(t)&&t.toolCallId===n?{...t,state:e,output:r,errorText:a}:t))}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map((t=>Ul(t)&&t.toolCallId===n?{...t,state:e,output:r,errorText:a}:t))),"streaming"!==this.status&&"submitted"!==this.status&&(null==(t=this.sendAutomaticallyWhen)?void 0:t.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(s=this.lastMessage)?void 0:s.id})})),this.addToolResult=this.addToolOutput,this.stop=async()=>{var e;"streaming"!==this.status&&"submitted"!==this.status||(null==(e=this.activeResponse)?void 0:e.abortController)&&this.activeResponse.abortController.abort()},this.id=t,this.transport=n,this.generateId=e,this.messageMetadataSchema=r,this.dataPartSchemas=a,this.state=s,this.onError=i,this.onToolCall=o,this.onFinish=c,this.onData=l,this.sendAutomaticallyWhen=u}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:n,body:r,messageId:a}){var s,i,o,c;this.setStatus({status:"submitted",error:void 0});const l=this.lastMessage;let u=!1,d=!1,p=!1;try{const o={state:Bl({lastMessage:this.state.snapshot(l),messageId:this.generateId()}),abortController:new AbortController};let c;if(o.abortController.signal.addEventListener("abort",(()=>{u=!0})),this.activeResponse=o,"resume-stream"===e){const e=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:n,body:r});if(null==e)return void this.setStatus({status:"ready"});c=e}else c=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:o.abortController.signal,metadata:t,headers:n,body:r,trigger:e,messageId:a});const h=e=>this.jobExecutor.run((()=>e({state:o.state,write:()=>{var e;this.setStatus({status:"streaming"});o.state.message.id===(null==(e=this.lastMessage)?void 0:e.id)?this.state.replaceMessage(this.state.messages.length-1,o.state.message):this.state.pushMessage(o.state.message)}})));await Jl({stream:Wl({stream:c,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:h,onError:e=>{throw e}}),onError:e=>{throw e}}),this.setStatus({status:"ready"})}catch(e){if(u||"AbortError"===e.name)return u=!0,this.setStatus({status:"ready"}),null;p=!0,e instanceof TypeError&&(e.message.toLowerCase().includes("fetch")||e.message.toLowerCase().includes("network"))&&(d=!0),this.onError&&e instanceof Error&&this.onError(e),this.setStatus({status:"error",error:e})}finally{try{null==(i=this.onFinish)||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:u,isDisconnect:d,isError:p,finishReason:null==(s=this.activeResponse)?void 0:s.state.finishReason})}catch(e){console.error(e)}this.activeResponse=void 0}(null==(o=this.sendAutomaticallyWhen)?void 0:o.call(this,{messages:this.state.messages}))&&!p&&await this.makeRequest({trigger:"submit-message",messageId:null==(c=this.lastMessage)?void 0:c.id,metadata:t,headers:n,body:r})}};var tu=class extends Xl{constructor(e={}){super(e)}processResponseStream(e){return function({stream:e}){return e.pipeThrough(new TransformStream({start(e){e.enqueue({type:"start"}),e.enqueue({type:"start-step"}),e.enqueue({type:"text-start",id:"text-1"})},async transform(e,t){t.enqueue({type:"text-delta",id:"text-1",delta:e})},async flush(e){e.enqueue({type:"text-end",id:"text-1"}),e.enqueue({type:"finish-step"}),e.enqueue({type:"finish"})}}))}({stream:e.pipeThrough(new TextDecoderStream)})}};Gr((()=>Da(Yo(Go({id:mo(),role:ic(["system","user","assistant"]),metadata:Wo().optional(),parts:Yo(ec([Go({type:cc("text"),text:mo(),state:ic(["streaming","done"]).optional(),providerMetadata:El.optional()}),Go({type:cc("reasoning"),text:mo(),state:ic(["streaming","done"]).optional(),providerMetadata:El.optional()}),Go({type:cc("source-url"),sourceId:mo(),url:mo(),title:mo().optional(),providerMetadata:El.optional()}),Go({type:cc("source-document"),sourceId:mo(),mediaType:mo(),title:mo(),filename:mo().optional(),providerMetadata:El.optional()}),Go({type:cc("file"),mediaType:mo(),filename:mo().optional(),url:mo(),providerMetadata:El.optional()}),Go({type:cc("step-start")}),Go({type:mo().startsWith("data-"),id:mo().optional(),data:Wo()}),Go({type:cc("dynamic-tool"),toolName:mo(),toolCallId:mo(),state:cc("input-streaming"),input:Wo().optional(),providerExecuted:Lo().optional(),output:qo().optional(),errorText:qo().optional()}),Go({type:cc("dynamic-tool"),toolName:mo(),toolCallId:mo(),state:cc("input-available"),input:Wo(),providerExecuted:Lo().optional(),output:qo().optional(),errorText:qo().optional(),callProviderMetadata:El.optional()}),Go({type:cc("dynamic-tool"),toolName:mo(),toolCallId:mo(),state:cc("output-available"),input:Wo(),providerExecuted:Lo().optional(),output:Wo(),errorText:qo().optional(),callProviderMetadata:El.optional(),preliminary:Lo().optional()}),Go({type:cc("dynamic-tool"),toolName:mo(),toolCallId:mo(),state:cc("output-error"),input:Wo(),providerExecuted:Lo().optional(),output:qo().optional(),errorText:mo(),callProviderMetadata:El.optional()}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("input-streaming"),providerExecuted:Lo().optional(),input:Wo().optional(),output:qo().optional(),errorText:qo().optional(),approval:qo().optional()}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("input-available"),providerExecuted:Lo().optional(),input:Wo(),output:qo().optional(),errorText:qo().optional(),callProviderMetadata:El.optional(),approval:qo().optional()}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("approval-requested"),input:Wo(),providerExecuted:Lo().optional(),output:qo().optional(),errorText:qo().optional(),callProviderMetadata:El.optional(),approval:Go({id:mo(),approved:qo().optional(),reason:qo().optional()})}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("approval-responded"),input:Wo(),providerExecuted:Lo().optional(),output:qo().optional(),errorText:qo().optional(),callProviderMetadata:El.optional(),approval:Go({id:mo(),approved:Lo(),reason:mo().optional()})}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("output-available"),providerExecuted:Lo().optional(),input:Wo(),output:Wo(),errorText:qo().optional(),callProviderMetadata:El.optional(),preliminary:Lo().optional(),approval:Go({id:mo(),approved:cc(!0),reason:mo().optional()}).optional()}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("output-error"),providerExecuted:Lo().optional(),input:Wo(),output:qo().optional(),errorText:mo(),callProviderMetadata:El.optional(),approval:Go({id:mo(),approved:cc(!0),reason:mo().optional()}).optional()}),Go({type:mo().startsWith("tool-"),toolCallId:mo(),state:cc("output-denied"),providerExecuted:Lo().optional(),input:Wo(),output:qo().optional(),errorText:qo().optional(),callProviderMetadata:El.optional(),approval:Go({id:mo(),approved:cc(!1),reason:mo().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty"))));var nu,ru,au,su,iu,ou,cu,lu,uu,du=n(49623),pu=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},hu=(e,t,n)=>(pu(e,t,"read from private field"),n?n.call(e):t.get(e)),fu=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},mu=(e,t,n,r)=>(pu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function gu(e,t){return null!=t?du(e,t):e}var vu;nu=new WeakMap,ru=new WeakMap,au=new WeakMap,su=new WeakMap,iu=new WeakMap,ou=new WeakMap,cu=new WeakMap,lu=new WeakMap,uu=new WeakMap;var yu=class extends eu{constructor({messages:e,...t}){const n=new class{constructor(e=[]){fu(this,nu,void 0),fu(this,ru,"ready"),fu(this,au,void 0),fu(this,su,new Set),fu(this,iu,new Set),fu(this,ou,new Set),this.pushMessage=e=>{mu(this,nu,hu(this,nu).concat(e)),hu(this,cu).call(this)},this.popMessage=()=>{mu(this,nu,hu(this,nu).slice(0,-1)),hu(this,cu).call(this)},this.replaceMessage=(e,t)=>{mu(this,nu,[...hu(this,nu).slice(0,e),this.snapshot(t),...hu(this,nu).slice(e+1)]),hu(this,cu).call(this)},this.snapshot=e=>structuredClone(e),this["~registerMessagesCallback"]=(e,t)=>{const n=t?gu(e,t):e;return hu(this,su).add(n),()=>{hu(this,su).delete(n)}},this["~registerStatusCallback"]=e=>(hu(this,iu).add(e),()=>{hu(this,iu).delete(e)}),this["~registerErrorCallback"]=e=>(hu(this,ou).add(e),()=>{hu(this,ou).delete(e)}),fu(this,cu,(()=>{hu(this,su).forEach((e=>e()))})),fu(this,lu,(()=>{hu(this,iu).forEach((e=>e()))})),fu(this,uu,(()=>{hu(this,ou).forEach((e=>e()))})),mu(this,nu,e)}get status(){return hu(this,ru)}set status(e){mu(this,ru,e),hu(this,lu).call(this)}get error(){return hu(this,au)}set error(e){mu(this,au,e),hu(this,uu).call(this)}get messages(){return hu(this,nu)}set messages(e){mu(this,nu,[...e]),hu(this,cu).call(this)}}(e);super({...t,state:n}),fu(this,vu,void 0),this["~registerMessagesCallback"]=(e,t)=>hu(this,vu)["~registerMessagesCallback"](e,t),this["~registerStatusCallback"]=e=>hu(this,vu)["~registerStatusCallback"](e),this["~registerErrorCallback"]=e=>hu(this,vu)["~registerErrorCallback"](e),mu(this,vu,n)}};vu=new WeakMap;var bu=n(79693),_u=n(32061),ku=n(21692),wu=n(64369),xu=n(28407),Eu=Math.max,Su=Math.min;var Iu=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return void 0!==n&&(a=(0,xu.Z)(n),a=n<0?Eu(r+a,0):Su(a,r-1)),(0,ku.Z)(e,(0,wu.Z)(t,3),a,!0)},Tu=(0,_u.Z)(Iu),zu=n(20640),Cu=n.n(zu);var Au=function(e){void 0===e&&(e={});var t=(0,a.useState)(e),n=t[0],r=t[1];return[n,(0,a.useCallback)((function(e){r((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]},Zu=function(){var e,t,n=(e=(0,a.useRef)(!1),t=(0,a.useCallback)((function(){return e.current}),[]),(0,a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t),r=Au({value:void 0,error:void 0,noUserInteraction:!0}),s=r[0],i=r[1];return[s,(0,a.useCallback)((function(e){var t,r;if(n())try{if("string"!=typeof e&&"number"!=typeof e){var a=new Error("Cannot copy typeof "+typeof e+" to clipboard, must be a string");return void i({value:e,error:a,noUserInteraction:!0})}if(""===e){a=new Error("Cannot copy empty string to clipboard.");return void i({value:e,error:a,noUserInteraction:!0})}r=e.toString(),t=Cu()(r),i({value:r,error:void 0,noUserInteraction:t})}catch(a){i({value:r,error:a,noUserInteraction:t})}}),[])]},$u=n(17625),Ou=n(84248),Nu=n(61555);function Pu(e){return Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(e)}function Ru(){Ru=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,a){var s=new RegExp(e,r);return t.set(s,a||t.get(e)),ju(s,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var a=r[n];if("number"==typeof a)t[n]=e[a];else{for(var s=0;void 0===e[a[s]]&&s+1<a.length;)s++;t[n]=e[a[s]]}return t}),Object.create(null))}return Mu(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var a=n.indices;a&&(a.groups=r(a,this))}return n},n.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var s=t.get(this);return e[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)>/g,(function(e,t){var n=s[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=Pu(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,n,a)},Ru.apply(this,arguments)}function Mu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}function ju(e,t){return ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ju(e,t)}var Fu=n(9894),Du=n(7716),Lu=n(91534),Uu=n(93179),Vu={'code[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"]::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},prolog:{color:"hsl(230, 4%, 64%)"},cdata:{color:"hsl(230, 4%, 64%)"},doctype:{color:"hsl(230, 8%, 24%)"},punctuation:{color:"hsl(230, 8%, 24%)"},entity:{color:"hsl(230, 8%, 24%)",cursor:"help"},"attr-name":{color:"hsl(35, 99%, 36%)"},"class-name":{color:"hsl(35, 99%, 36%)"},boolean:{color:"hsl(35, 99%, 36%)"},constant:{color:"hsl(35, 99%, 36%)"},number:{color:"hsl(35, 99%, 36%)"},atrule:{color:"hsl(35, 99%, 36%)"},keyword:{color:"hsl(301, 63%, 40%)"},property:{color:"hsl(5, 74%, 59%)"},tag:{color:"hsl(5, 74%, 59%)"},symbol:{color:"hsl(5, 74%, 59%)"},deleted:{color:"hsl(5, 74%, 59%)"},important:{color:"hsl(5, 74%, 59%)"},selector:{color:"hsl(119, 34%, 47%)"},string:{color:"hsl(119, 34%, 47%)"},char:{color:"hsl(119, 34%, 47%)"},builtin:{color:"hsl(119, 34%, 47%)"},inserted:{color:"hsl(119, 34%, 47%)"},regex:{color:"hsl(119, 34%, 47%)"},"attr-value":{color:"hsl(119, 34%, 47%)"},"attr-value > .token.punctuation":{color:"hsl(119, 34%, 47%)"},variable:{color:"hsl(221, 87%, 60%)"},operator:{color:"hsl(221, 87%, 60%)"},function:{color:"hsl(221, 87%, 60%)"},url:{color:"hsl(198, 99%, 37%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(230, 8%, 24%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(230, 8%, 24%)"},".language-css .token.selector":{color:"hsl(5, 74%, 59%)"},".language-css .token.property":{color:"hsl(230, 8%, 24%)"},".language-css .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.string.url":{color:"hsl(119, 34%, 47%)"},".language-css .token.important":{color:"hsl(301, 63%, 40%)"},".language-css .token.atrule .token.rule":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.operator":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(344, 84%, 43%)"},".language-json .token.operator":{color:"hsl(230, 8%, 24%)"},".language-json .token.null.keyword":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.url":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.operator":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.content":{color:"hsl(221, 87%, 60%)"},".language-markdown .token.url > .token.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.url-reference.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(119, 34%, 47%)"},".language-markdown .token.bold .token.content":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.italic .token.content":{color:"hsl(301, 63%, 40%)"},".language-markdown .token.strike .token.content":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.list.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(5, 74%, 59%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.cr:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.lf:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.space:before":{color:"hsla(230, 8%, 24%, 0.2)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},".line-highlight.line-highlight":{background:"hsla(230, 8%, 24%, 0.05)"},".line-highlight.line-highlight:before":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(230, 8%, 24%, 0.05)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".command-line .command-line-prompt":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(230, 1%, 62%)"},".command-line .command-line-prompt > span:before":{color:"hsl(230, 1%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(301, 63%, 40%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(0, 0, 95%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(0, 0, 95%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(0, 0, 95%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(0, 0, 95%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(0, 0%, 100%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(230, 8%, 24%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(230, 8%, 24%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(230, 8%, 24%)"}},Bu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},Wu=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:Bu}))};var Ju=a.forwardRef(Wu),qu="vxuvdyYgpYvMTufpJh7x";function Hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ku=function(e){var t=e.inline,n=e.className,r=e.children,s=e.showRunButton,i=void 0===s||s,o=(0,bu.YB)(),c=Hu(Zu(),2),l=c[0],u=c[1];if(t||"string"==typeof r&&!r.includes("\n"))return a.createElement("code",{className:n},r);var p=/language-(\w+)/.exec(n||""),h=p?p[1]:"text",m=String(r).replace(/\n$/,""),g=i&&/\bimport\b/.test(m);return a.createElement("div",{style:{position:"relative",margin:"1em 0"}},a.createElement(fe.Z,{className:qu},a.createElement(me.Z,{title:o.formatMessage({id:"ai.markdown.copy"})},a.createElement(ge.ZP,{variant:"link",size:"small",onClick:function(){return u(m)},title:o.formatMessage({id:"ai.markdown.copy"})},l.value===m?a.createElement(d,null):a.createElement(f,null))),g&&a.createElement(me.Z,{title:o.formatMessage({id:"ai.markdown.run"})},a.createElement(ge.ZP,{variant:"link",size:"small",onClick:function(){Nu.cE.codeBlock=m},title:o.formatMessage({id:"ai.markdown.run"})},a.createElement(Ju,null)))),a.createElement(Uu.Z,{style:Vu,language:"vue"===h?"html":h,PreTag:"div",showLineNumbers:!1,customStyle:{paddingTop:"2em",background:"#fafafa"}},m))},Gu=["node"];function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xu.apply(this,arguments)}function Qu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ed=function(e){var t=e.content,n=e.showRunButton;return a.createElement(Fu.UG,{remarkPlugins:[Lu.Z],rehypePlugins:[Du.Z],components:{p:function(e){e.node;var t=Qu(e,Gu);return a.createElement("p",Xu({style:{marginBottom:"unset",lineHeight:"1.6"}},t))},code:function(e){return a.createElement(Ku,Xu({showRunButton:n},e))},description:function(e){return a.createElement("span",Xu({style:{fontSize:"12px",color:"#777",display:"block"}},e))}}},t)},td="QsTXCY9Z3yQ06YtfKXx2",nd="JJ2Lch9zrhQTUjcxhLzz",rd="ZAyaZDQNkV5pU2bVRYJE";function ad(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var id=n(24012),od=n(44978),cd=n(2951);function ld(e){return ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ld(e)}function ud(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pd={icon:a.createElement("img",{draggable:!1,src:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*7svFR6wkPMoAAAAAAAAAAAAADmJ7AQ/original",alt:"AntV"}),style:{borderRadius:0,backgroundColor:"transparent"}},hd=function(){setTimeout((function(){document.getElementById("msgBoxAnchor").scrollIntoView({block:"end"})}),100)},fd=function(e){return e.map((function(e){return{id:e.id,role:e.role,parts:[{type:"text",text:e.content}]}}))},md=function(e){return e.parts.filter((function(e){return"text"===e.type})).map((function(e){return e.text})).join("")};var gd=function(e){var t,n,r,s,i,o,l=e.messages,u=void 0===l?[]:l,p=e.simple,h=void 0!==p&&p,m=e.onCodegen,g=e.title,_=(0,bu.YB)().formatMessage,k=ud((0,a.useState)(""),2),x=k[0],E=k[1],S=ud((0,a.useState)(""),2),I=S[0],T=S[1],z=(0,$u.R)(Nu.cE),C=(0,$u.R)(Nu.EB),A=ud(Zu(),2),Z=A[0],$=A[1],O=Tu(null===(t=C.activeSession)||void 0===t?void 0:t.messages,(function(e){return"user"===e.role})),N=(0,a.useRef)(z.anonymousUserId),P=(0,a.useRef)(null===(n=C.activeSession)||void 0===n?void 0:n.id),R=(0,bu.WF)().themeConfig;(0,a.useEffect)((function(){var e;N.current=z.anonymousUserId,P.current=null===(e=C.activeSession)||void 0===e?void 0:e.id}),[z.anonymousUserId,null===(r=C.activeSession)||void 0===r?void 0:r.id]);var M=(0,a.useMemo)((function(){return fd(u)}),[u]),j=function({experimental_throttle:e,resume:t=!1,...n}={}){const r=(0,a.useRef)("chat"in n?n.chat:new yu(n));("chat"in n&&n.chat!==r.current||"id"in n&&r.current.id!==n.id)&&(r.current="chat"in n?n.chat:new yu(n));const s="id"in n?n.id:null,i=(0,a.useCallback)((t=>r.current["~registerMessagesCallback"](t,e)),[e,s]),o=(0,a.useSyncExternalStore)(i,(()=>r.current.messages),(()=>r.current.messages)),c=(0,a.useSyncExternalStore)(r.current["~registerStatusCallback"],(()=>r.current.status),(()=>r.current.status)),l=(0,a.useSyncExternalStore)(r.current["~registerErrorCallback"],(()=>r.current.error),(()=>r.current.error)),u=(0,a.useCallback)((e=>{"function"==typeof e&&(e=e(r.current.messages)),r.current.messages=e}),[r]);return(0,a.useEffect)((()=>{t&&r.current.resumeStream()}),[t,r]),{id:r.current.id,messages:o,setMessages:u,sendMessage:r.current.sendMessage,regenerate:r.current.regenerate,clearError:r.current.clearError,stop:r.current.stop,error:l,resumeStream:r.current.resumeStream,status:c,addToolResult:r.current.addToolOutput,addToolOutput:r.current.addToolOutput}}({transport:new tu({api:(0,id.BS)()+"/api/modules/antv/ai/chat",credentials:"include",headers:{},body:function(){return{gptConversationId:P.current,anonymousUserId:N.current,mountId:"container",antvContext:(null==O?void 0:O.context)||e.context,library:Nu.cE.lib,mode:Nu.cE.mode}}}),messages:M,onFinish:function(e){var t=e.message,n=e.isAbort,r=e.isDisconnect,a=e.isError;if(!n&&!r&&!a){var s,i=md(t);if(function(e){if("string"!=typeof e)return!1;var t=e.trim(),n=/\bimport\b/.test(t);return!!(t.startsWith("```")&&t.endsWith("```")&&n)}(i)){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Ru(/```(\w*)\n?([\s\S]*?)```/,{lang:1,code:2}),n=e.match(t);return n?{lang:n.groups.lang||"plaintext",code:n.groups.code.trim()}:{code:""}}(i).code;Nu.cE.codeBlock=o,null==m||m(o)}else Nu.cE.codeBlock="";null===(s=Nu.EB.activeSession)||void 0===s||null===(s=s.messages)||void 0===s||s.push({id:crypto.randomUUID(),role:"assistant",content:i,createdAt:Date.now()})}},onError:function(e){var t;console.error("å›žç­”å¤±è´¥",e),null===(t=Nu.EB.activeSession)||void 0===t||null===(t=t.messages)||void 0===t||t.push({id:crypto.randomUUID(),role:"assistant",content:_({id:"ai.msgbox.error.response"}),createdAt:Date.now()})}}),F=j.messages,D=j.setMessages,L=j.sendMessage,U=j.regenerate,V=j.status,B=j.stop;(0,a.useEffect)((function(){h||setTimeout((function(){var e,t=null===(e=C.activeSession)||void 0===e?void 0:e.messages;if((null==t?void 0:t.length)>0){var n=fd(t);F.length===n.length&&JSON.stringify(F)===JSON.stringify(n)||D(n)}else D([])}))}),[null===(s=C.activeSession)||void 0===s?void 0:s.id,null===(i=C.activeSession)||void 0===i||null===(i=i.messages)||void 0===i?void 0:i.length]),(0,a.useEffect)((function(){var e,t;z.tempMessage&&(L({text:z.tempMessage.content}),null===(e=Nu.EB.activeSession)||void 0===e||null===(e=e.messages)||void 0===e||null===(t=e.push)||void 0===t||t.call(e,z.tempMessage),Nu.cE.tempMessage=null)}),[z.tempMessage]),(0,a.useEffect)((function(){return hd(),h&&((0,Nu.Np)(g),Nu.cE.mode=od.en.implement,!R.isAntVSite&&R.title&&(Nu.cE.lib=R.title)),function(){h&&(0,Nu.Qo)()}}),[]),(0,a.useEffect)((function(){hd(),B(),Nu.cE.errorMsg=null}),[z.activeSessionId]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=(0,a.useRef)(null),r=(0,a.useRef)(null),s=(0,a.useState)(!1),i=ad(s,2),o=i[0],c=i[1];return(0,a.useLayoutEffect)((function(){var e,a=n.current;a&&(a.scrollHeight-a.scrollTop<=a.clientHeight+t+200?(null===(e=r.current)||void 0===e||e.scrollIntoView({block:"end"}),c(!1)):c(!0))}),[e,t]),{containerRef:n,anchorRef:r,showScrollDownButton:o}}(F),J=W.containerRef,q=W.anchorRef;return a.createElement(a.Fragment,null,a.createElement(he.Z,{gap:"middle",vertical:!0,className:rd,ref:J},F.map((function(t,n){var r=md(t);return a.createElement(pe,{key:t.id||n,content:a.createElement(ed,{content:r,showRunButton:!e.simple}),avatar:"assistant"===t.role?pd:null,footer:"ready"===V&&a.createElement(fe.Z,{size:"small"},"assistant"===t.role&&n===F.length-1&&a.createElement(me.Z,{title:_({id:"ai.msgbox.retry"})},a.createElement(ge.ZP,{onClick:function(){U(),Nu.EB.activeSession.messages.pop()},color:"default",variant:"text",size:"small",icon:a.createElement(c,null)})),a.createElement(me.Z,{title:_({id:"ai.msgbox.copy"})},a.createElement(ge.ZP,{color:"default",variant:"text",size:"small",onClick:function(){return $(r)},icon:Z.value===r?a.createElement(d,null):a.createElement(f,null)})),a.createElement(me.Z,{title:_({id:"ai.msgbox.continue.from.here"})},a.createElement(ge.ZP,{color:"default",variant:"text",size:"small",onClick:function(){return(0,Nu.Nm)(n)},icon:a.createElement(v,null)})),"assistant"===t.role&&a.createElement(me.Z,{title:_({id:"ai.msgbox.delete"})},a.createElement(ge.ZP,{color:"default",variant:"text",size:"small",onClick:function(){return(0,Nu.$Z)(t.id)},icon:a.createElement(y.Z,null)}))),placement:"user"===t.role?"end":"start"})})),("streaming"===V||"submitted"===V)&&"user"===(null===(o=F[F.length-1])||void 0===o?void 0:o.role)&&a.createElement(pe,{placement:"start",avatar:pd,loading:!0}),a.createElement("div",{ref:q,id:"msgBoxAnchor"})),a.createElement("div",null,!e.simple&&a.createElement("div",{className:nd},a.createElement(fe.Z,null,a.createElement("button",{type:"button",onClick:function(){return(0,Nu.Np)()},className:td},a.createElement(fe.Z,null,a.createElement(b.Z,null),_({id:"ai.msgbox.start.new.chat"}))),z.errorMsg&&"ready"===V&&a.createElement(ge.ZP,{onClick:function(){var e,t="".concat(_({id:"ai.msgbox.auto.fix.prompt"})," [").concat(z.errorMsg,"]");L({text:t},{body:{antvContext:z.codeBlock}}),Nu.cE.errorMsg=null,null===(e=Nu.EB.activeSession)||void 0===e||null===(e=e.messages)||void 0===e||e.push({id:crypto.randomUUID(),role:"user",content:t,createdAt:Date.now(),context:z.codeBlock,lib:z.lib}),hd()},color:"danger",variant:"filled",icon:a.createElement(w,null)},_({id:"ai.msgbox.auto.fix"})))),a.createElement(Ou.b,{size:"compact",value:x,onChange:E,loading:"streaming"===V||"submitted"===V,onCancel:B,showAction:!e.simple,style:{marginBottom:0},onConfirm:function(){var e,t,n=x.trim();n&&"streaming"!==V&&"submitted"!==V&&(C.activeSession&&0===(null===(e=C.activeSession.messages)||void 0===e?void 0:e.length)&&(Nu.EB.activeSession.title=n),L({text:x},{body:{}}),E(""),null===(t=Nu.EB.activeSession)||void 0===t||null===(t=t.messages)||void 0===t||t.push({id:crypto.randomUUID(),role:"user",content:x,createdAt:Date.now(),context:I,lib:z.lib}),hd(),"object"===("undefined"==typeof window?"undefined":ld(window))&&(0,cd.L)("start_ai_chat",{entry_point:h?"Drawer":"MsgBox",mode:Nu.cE.mode,lib:Nu.cE.lib,page_title:document.title,location:location.href}))},onDataSummaryChange:T,showModeSelector:!0})))}},83109:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(67294),a=n(93967),s=n.n(a),i=n(98423),o=n(57588),c=n(51934),l=n(74869),u=n(83262);const d=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],h=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var f=function(e,t){return s()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${n}`]:n&&d.includes(n)}})(e,t)),((e,t)=>{const n={};return h.forEach((r=>{n[`${e}-align-${r}`]=t.align===r})),n[`${e}-align-stretch`]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return p.forEach((r=>{n[`${e}-justify-${r}`]=t.justify===r})),n})(e,t)))};const m=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},g=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},v=e=>{const{componentCls:t}=e,n={};return d.forEach((e=>{n[`${t}-wrap-${e}`]={flexWrap:e}})),n},y=e=>{const{componentCls:t}=e,n={};return h.forEach((e=>{n[`${t}-align-${e}`]={alignItems:e}})),n},b=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n[`${t}-justify-${e}`]={justifyContent:e}})),n};var _=(0,l.I$)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:r}=e,a=(0,u.IX)(e,{flexGapSM:t,flexGap:n,flexGapLG:r});return[m(a),g(a),v(a),y(a),b(a)]}),(()=>({})),{resetStyle:!1}),k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const w=r.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:a,className:l,style:u,flex:d,gap:p,vertical:h=!1,component:m="div",children:g}=e,v=k(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:y,direction:b,getPrefixCls:w}=r.useContext(c.E_),x=w("flex",n),[E,S,I]=_(x),T=null!=h?h:null==y?void 0:y.vertical,z=s()(l,a,null==y?void 0:y.className,x,S,I,f(x,e),{[`${x}-rtl`]:"rtl"===b,[`${x}-gap-${p}`]:(0,o.n)(p),[`${x}-vertical`]:T}),C=Object.assign(Object.assign({},null==y?void 0:y.style),u);return d&&(C.flex=d),p&&!(0,o.n)(p)&&(C.gap=p),E(r.createElement(m,Object.assign({ref:t,className:z,style:C},(0,i.Z)(v,["justify","wrap","align"])),g))}));var x=w},49623:function(e){e.exports=function(e,t){if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let n,r=0;return function(...a){clearTimeout(n);const s=Date.now(),i=t-(s-r);i<=0?(r=s,e.apply(this,a)):n=setTimeout((()=>{r=Date.now(),e.apply(this,a)}),i)}}}}]);