<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>G6 - 系统网络</title>
  <meta name="keywords" content="G2, The Grammar of Graphics, 图形语法,图表绘制引擎,图表库,可视化,数据可视化,AntV,Data Visualization,visualization,visualisation, antd, ant, ant design, G6, 流程图, 关系图, 可视化规范, 地图, 河流图, 力导图, 网络图, UML图, 流图, 时序图, 图">
  <meta name="description" content="一套专业、简单、无限可能的可视化解决方案">
  <link rel="icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="shortcut icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="../../../static/style.css" />
  <link rel="stylesheet" type="text/css" href="../../../static/codemirror.css" />
  <link rel="stylesheet" type="text/css" href="../../../static/tipuesearch/tipuesearch.css" >
  <script src="../../../static/jquery.js"></script>
  <script src="../../../static/tipuesearch/tipuesearch_set.js"></script>
  <script src="../../../static/tipuesearch/tipuesearch.js"></script>
  <script src="https://g.alicdn.com/bui/??seajs/2.3.0/sea.js"></script>
  <script src="https://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
  <script src="../../../static/script.js"></script>
<script src="https://gw.alipayobjects.com/os/antv/assets/g6/1.2.8/g6.min.js"></script>
</head>
<body class="demo-detail-page">
 

  <div class="main-container clearfix">

<div class="body-content demo-detail">

  <!-- demo 页面头部导航栏 -->
  <div class="demo-head">
    <div class="header clearfix">
      <a class="header-back" href="/g6/doc">
        <i class="iconfont icon-cross"></i>
      </a>
      <div class="header-crumb">
        <span class="chanel">G6</span> 图表示例
      </div>
    </div>
  </div>

  <!-- 左侧导航栏 -->
  <div class="doc-nav">
    <ul class="doc-nav-list">
      <li class="">
        <i class="iconfont">&#xe620;</i>
        <!-- <a href="#流图" id="demo流图" class="j_navItems">流图</a> -->
        <a href="/g6/demo/index.html#流图" id="demo流图" class="j_navItems">流图</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo流图">
          <li>
            <a href="../../../g6/demo/01-businessFlow/page-flow1.html">
              <img src="../../../static/images/g6/01-businessFlow/page-flow1.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/01-businessFlow/page-flow2.html">
              <img src="../../../static/images/g6/01-businessFlow/page-flow2.gif" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/01-businessFlow/saoma.html">
              <img src="../../../static/images/g6/01-businessFlow/saoma.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/01-businessFlow/sign-flow.html">
              <img src="../../../static/images/g6/01-businessFlow/sign-flow.gif" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/01-businessFlow/wuliu.html">
              <img src="../../../static/images/g6/01-businessFlow/wuliu.png" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
      <li class="">
        <i class="iconfont">&#xe61f;</i>
        <!-- <a href="#树图" id="demo树图" class="j_navItems">树图</a> -->
        <a href="/g6/demo/index.html#树图" id="demo树图" class="j_navItems">树图</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo树图">
          <li>
            <a href="../../../g6/demo/02-tree/tree.html">
              <img src="../../../static/images/g6/02-tree/tree.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/02-tree/indented.html">
              <img src="../../../static/images/g6/02-tree/indented.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/02-tree/layered-tidy.html">
              <img src="../../../static/images/g6/02-tree/layered-tidy.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/02-tree/dendrogram.html">
              <img src="../../../static/images/g6/02-tree/dendrogram.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/02-tree/tree-layout.html">
              <img src="../../../static/images/g6/02-tree/tree-layout.png" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
      <li class="">
        <i class="iconfont">&#xe6e5;</i>
        <!-- <a href="#网图" id="demo网图" class="j_navItems">网图</a> -->
        <a href="/g6/demo/index.html#网图" id="demo网图" class="j_navItems">网图</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo网图">
          <li>
            <a href="../../../g6/demo/03-net/languageInfluenceNetwork.html">
              <img src="../../../static/images/g6/03-net/languageInfluenceNetwork.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/03-net/force.html">
              <img src="../../../static/images/g6/03-net/force.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/03-net/systemNet.html">
              <img src="../../../static/images/g6/03-net/systemNet.png" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
      <li class="">
        <i class="iconfont">&#xe6df</i>
        <!-- <a href="#编辑器" id="demo编辑器" class="j_navItems">编辑器</a> -->
        <a href="/g6/demo/index.html#编辑器" id="demo编辑器" class="j_navItems">编辑器</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo编辑器">
          <li>
            <a href="../../../g6/demo/04-editor/editor.html">
              <img src="../../../static/images/g6/04-editor/editor.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/04-editor/editor-extend1.html">
              <img src="../../../static/images/g6/04-editor/editor-extend1.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/04-editor/editor-extend2.html">
              <img src="../../../static/images/g6/04-editor/editor-extend2.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/04-editor/mind.html">
              <img src="../../../static/images/g6/04-editor/mind.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/04-editor/perventLink.html">
              <img src="../../../static/images/g6/04-editor/perventLink.gif" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
      <li class="">
        <i class="iconfont">&#xe645</i>
        <!-- <a href="#画廊" id="demo画廊" class="j_navItems">画廊</a> -->
        <a href="/g6/demo/index.html#画廊" id="demo画廊" class="j_navItems">画廊</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo画廊">
          <li>
            <a href="../../../g6/demo/05-gallery/us-cpi.html">
              <img src="../../../static/images/g6/05-gallery/us-cpi.gif" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/05-gallery/iris-flower.html">
              <img src="../../../static/images/g6/05-gallery/iris-flower.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/05-gallery/dataBase.html">
              <img src="../../../static/images/g6/05-gallery/dataBase.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/05-gallery/sequence.html">
              <img src="../../../static/images/g6/05-gallery/sequence.png" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
      <li class="">
        <i class="iconfont">&#xe6e9;</i>
        <!-- <a href="#其他" id="demo其他" class="j_navItems">其他</a> -->
        <a href="/g6/demo/index.html#其他" id="demo其他" class="j_navItems">其他</a>
        <div class="hide">
        <ul class="demo-thumbnail-panel clearfix" id="J_demo其他">
          <li>
            <a href="../../../g6/demo/06-other/html2canvas.html">
              <img src="../../../static/images/g6/06-other/html2canvas.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/anchor-attr.html">
              <img src="../../../static/images/g6/06-other/anchor-attr.gif" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/anchor-update.html">
              <img src="../../../static/images/g6/06-other/anchor-update.gif" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/crud.html">
              <img src="../../../static/images/g6/06-other/crud.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/custom-arrow.html">
              <img src="../../../static/images/g6/06-other/custom-arrow.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/editor.html">
              <img src="../../../static/images/g6/06-other/editor.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/event.html">
              <img src="../../../static/images/g6/06-other/event.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/fitView.html">
              <img src="../../../static/images/g6/06-other/fitView.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/flow-vis.html">
              <img src="../../../static/images/g6/06-other/flow-vis.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/g6ppt.html">
              <img src="../../../static/images/g6/06-other/g6ppt.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/anchor-type.html">
              <img src="../../../static/images/g6/06-other/anchor-type.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/htmlnode.html">
              <img src="../../../static/images/g6/06-other/htmlnode.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/mapping.html">
              <img src="../../../static/images/g6/06-other/mapping.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/mode.html">
              <img src="../../../static/images/g6/06-other/mode.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/node-get-fun.html">
              <img src="../../../static/images/g6/06-other/node-get-fun.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/saveAndread.html">
              <img src="../../../static/images/g6/06-other/saveAndread.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/source.html">
              <img src="../../../static/images/g6/06-other/source.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/tooltip-cfg.html">
              <img src="../../../static/images/g6/06-other/tooltip-cfg.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/tooltip-true.html">
              <img src="../../../static/images/g6/06-other/tooltip-true.png" width="156px" />
            </a>
          </li>
          <li>
            <a href="../../../g6/demo/06-other/tree-source.html">
              <img src="../../../static/images/g6/06-other/tree-source.png" width="156px" />
            </a>
          </li>
        </ul>
        </div>
      </li>
  </div>

  <div class="nav-mask fadeIn hide"></div>

  <script type="text/javascript">
  var clearTime;
  var navMask = $('div.nav-mask');
  $('a.j_navItems').click(function(e) {
    var target = $(e.target);
    target.parent().addClass('active').siblings().removeClass('active');
    navMask.addClass('hide');
  });

  $('a.j_navItems').mouseover(function(e) {
    clearTimeout(clearTime);
    var id = $(this).attr('id');
    var top = $(this).offset().top - $(this).height() / 2;
    navMask.removeClass('hide');
    navMask.html($('#J_' + id).prop("outerHTML"));
    navMask.css('top', top);
  }).mouseout(function() {
    clearTimeout(clearTime);

    clearTime = setTimeout(function() {
      if (!navMask.hasClass('hide')) {
        navMask.addClass('hide');
      }
    }, 250);
  });

  navMask.hover(function(e) {
    clearTimeout(clearTime);
    $(this).removeClass('hide');
    var thumbnailPanel = $(this).find('ul.demo-thumbnail-panel')[0];
    var id = thumbnailPanel.id;
    $('#' + id.substring(2)).parent().addClass('hover');
  }, function(e) {
    clearTimeout(clearTime);
    $(this).addClass('hide');
    var thumbnailPanel = $(this).find('ul.demo-thumbnail-panel')[0];
    var id = thumbnailPanel.id;
    $('#' + id.substring(2)).parent().removeClass('hover');
  });
  </script>
  <div id="widthHandler" class="handler"></div>

  <div class="doc-content demo-detail-doc">
    <div class="doc-inner">
      <div class="code-banner">
        <div class="tab-label actived">源码</div>
        <div class="code-operation">
          <button class="button" id="J_runCode">运行</button>
          <button class="button" id="J_copyCode">复制</button>
          <span id="J_copyStatus" style="display: none; color: #43CBC6; position: absolute; top: 35px; right: 10px; z-index: 20;"></span>
        </div>
      </div>
      <div class="code-panel">
        <div class="tab-content">
          <textarea id='code' name='code'>
   <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>系统网络</title>
<script src="https://a.alipayobjects.com/jquery/jquery/1.11.1/jquery.js"></script>
<script src="https://gw.alipayobjects.com/os/antv/assets/g6/1.2.8/g6.min.js"></script>
      </head>
      <body>
          <div id="c1"></div>
 <script type="text/javascript">
$.getJSON('../../../static/data/systemNet.json',function(data){
  var Layout = G6.Layout;
  var Util = G6.Util;
  var map = {};
  var maxValue = 0;
  var maxValueTmp;
  var layout;
  var sizeDomain = 20;

  G6.Global.nodeLabelStyle = {
    fill: '#666',
    textAlign: 'center',
    fontSize: 12,
    textBaseline: 'middle'
  };

  G6.registNode('rect',{
    getAnchorPoints: function(){
      return 'auto'
    }
  });

  G6.registEdge('bezierQuadratic',{
    afterDraw: function(cfg, group, edge){
      var points = cfg.points;
      var start = points[0];
      var end = points[points.length - 1];
      var center = edge.getPoint(0.5);
      var lineWidth = edge.attr('lineWidth');
      if(lineWidth < 5){
        lineWidth = 5;
      }
      // 关于自身坐标系构造一个形，作为箭头
      var arrow = group.addShape('polyline', {
        attrs:{
          points: [
            [-lineWidth/4, lineWidth/2],
            [lineWidth/4, 0],
            [-lineWidth/4, -lineWidth/2]
          ],
          stroke: '#333'
        },
        class: 'arrow'
      });
      arrow.hide();
      Util.arrowTo(arrow, center.x, center.y, center.x, center.y, end.x, end.y);
    }
  });

  Util.each(data.nodes, function(node){
    map[node.id] = node;
  });

  Util.each(data.edges, function(edge){
    maxValueTmp = parseInt(edge.value);
    if(maxValueTmp > maxValue) maxValue = maxValueTmp;
  });

  layout = new Layout.Force({
    nodes: data.nodes,
    edges: data.edges,
    stiffness: 100.0,         // 硬度
    damping: 0.1,             // 阻尼
    minEnergyThreshold: 200,  // 能量域值
    repulsion: 2000.0         // 斥力
  });

  var net = new G6.Net({
    id: 'c1',           // 容器ID
    mode: 'analysis',   // 分析模式
    fitView: 'autoZoom',
    height: 450         // 画布高
  });
  net.source(data.nodes, data.edges);
  net.node()
    .label('id')
    .style({
      fill: 'white',
      fillOpacity: 0.8
    });
  net.edge()
    .size(function(obj){
      return Math.pow(parseInt(obj.value)/maxValue, 1/3) * sizeDomain;
    })
    .style({
      opacity: 0.2
    })
    .shape('bezierQuadratic');
  layout.onNodeChange = function(id, point){
    map[id].x = point.x*60+400;
    map[id].y = point.y*60+400;
  };
  layout.onFinish = function(){
    net.render();
  };
  net.on('mouseenter', function(ev){
    var item = ev.item;
    var group;
    var arrow;
    if(!item || ev.itemType === 'edge') return;
    var unRelativeItems = item.getUnRelativeItems();
    var edges = item.get('edges');
    Util.each(unRelativeItems, function(v){
      v.hide();
    });
    Util.each(edges, function(v){
      group = v.get('group');
      arrow = group.findByCFG('class', 'arrow')[0];
      arrow.show();
    });
    net.refresh();
  });

  net.on('mouseleave', function(ev){
    var item = ev.item;
    var group;
    var arrow;
    if(!item || ev.itemType === 'edge') return;
    var unRelativeItems = item.getUnRelativeItems();
    var edges = item.get('edges');
    Util.each(unRelativeItems, function(v){
      v.show();
    });
    Util.each(edges, function(v){
      group = v.get('group');
      arrow = group.findByCFG('class', 'arrow')[0];
      arrow.hide();
    });
    net.refresh();
  });
});
</script>

      </body>
    </html>
          </textarea>
        </div>
      </div>
      <div class="chart-panel">
        <p class="title">系统网络</p>
        <iframe id="preview" class="demo-chart "></iframe>
        <div class="demo-chart-intro">
          <p style="margin-top: 0;">
          该图展示了某计算机集群内系统和系统之间的调用关系。该示例的目的在于向大家展示静态力导图的用法。（数据纯属虚构）
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<textarea class="hidden" id="reactCode">
  <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>系统网络</title>
        <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
        <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
        <script src="https://a.alipayobjects.com/g/datavis/g2/2.3.13/g2.js"></script>
        <script src="https://unpkg.com/g2-react@1.2.0/dist/index.js"></script>
        <script src="https://cdn.bootcss.com/babel-core/5.8.38/browser.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      </head>
      <body>
 <script type="text/babel">undefined
      </body>
    </html>
</textarea>
<script src="../../../static/codemirror-compressed.js"></script>
<script src="../../../static/clipboard.min.js"></script>
<script src="../../../static/demo-detail.js"></script>

  </div>
 
  <div style="display:none;">
<script src="https://s11.cnzz.com/z_stat.php?id=1259109662&web_id=1259109662" language="JavaScript"></script>
<script src="https://a.alipayobjects.com/g/component/tracert/1.0.0/index.js"></script>
</div>
</body>
</html>