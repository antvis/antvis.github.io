<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>仪表盘</title>
  <meta name="keywords" content="G2, The Grammar of Graphics, 图形语法,图表绘制引擎,图表库,可视化,数据可视化,AntV,Data Visualization,visualization,visualisation, antd, ant, ant design, G6, 流程图, 关系图, 可视化规范, 地图, 河流图, 力导图, 网络图, UML图, 流图, 时序图, 图">
  <meta name="description" content="一套专业、简单、无限可能的可视化解决方案">
  <link rel="icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="shortcut icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="../../../../static/style.css" />
  <link rel="stylesheet" type="text/css" href="../../../../static/codemirror.css" />
  <link rel="stylesheet" type="text/css" href="../../../../static/tipuesearch/tipuesearch.css" >
  <script src="../../../../static/jquery.js"></script>
  <script src="../../../../static/tipuesearch/tipuesearch_set.js"></script>
  <script src="../../../../static/tipuesearch/tipuesearch.js"></script>
  <script src="https://g.alicdn.com/bui/??seajs/2.3.0/sea.js"></script>
  <script src="https://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
  <script src="../../../../static/script.js"></script>
<script src="https://gw.alipayobjects.com/as/g/datavis/g2/2.3.13/index.js"></script>
</head>
<body><header id="header">
  <div class="nav-wrapper gradient-line">
    <div class="nav-content clearfix">
      <div class="pull-left">
        <a href="/index.html" class="nav-logo">
          <img src="https://zos.alipayobjects.com/rmsportal/aGpKpuxoGfZqJobMPLvj.svg">
          <span class="logo-text">AntV</span>
        </a>
        <div class="search-box">
          <form action="/search.html">
            <i class="iconfont icon-search"></i>
            <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
          </form>
        </div>
      </div>
      <div class="nav pull-right">
        <ul id="J_nav" class="clearfix nav-list">
          <li id="g2" class="nav-item">
            <a class="nav-item-link" href="/g2/doc/index.html">G2</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g2/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g2/doc/tutorial/start/index.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g2/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g2/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g2/doc/history.html">更新日志</a></li>
            </ul>
          </li>
          <li id="g2-mobile" class="nav-item">
            <a class="nav-item-link" href="/g2-mobile/doc/index.html">G2-mobile</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g2-mobile/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/doc/tutorial/shape.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/doc/history.html">更新日志</a></li>
            </ul>
          </li>
          <li id="g6" class="nav-item">
            <a class="nav-item-link" href="/g6/doc/index.html">G6</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g6/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g6/doc/tutorial/start/base.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g6/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g6/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g6/doc/history.html">更新日志</a></li>
              <li class="nav-sub-item"><a href="/g6/tools/index.html" target="_blank">在线工具</a></li>
            </ul>
          </li>
          <li id="vis" class="nav-item hover last">
            <a class="nav-item-link" href="/vis/doc/chart/index.html">可视化基础</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/vis/doc/chart/classify/compare.html">图表用法</a></li>
              <li class="nav-sub-item"><a href="/vis/doc/design/index.html">图表设计指引</a></li>
              <li class="nav-sub-item"><a href="/vis/doc/reference.html">经典文献</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
 
 

  <div class="main-container clearfix">
  <div class="doc-content vis-chart">
    <div class="doc-inner vis-chart">
      <h1>仪表盘</h1>
      <p><img src="https://t.alipayobjects.com/images/rmsweb/T184NiXaNcXXXXXXXX.png" /></p>
<h2 id="仪表盘的简介">仪表盘的简介</h2><p>仪表盘(Gauge)是一种拟物化的图表，刻度表示度量，指针表示维度，指针角度表示数值。仪表盘图表就像汽车的速度表一样，有一个圆形的表盘及相应的刻度，有一个指针指向当前数值。目前很多的管理报表或报告上都是用这种图表，以直观的表现出某个指标的进度或实际情况。</p>
<p>仪表盘的好处在于它能跟人们的常识结合，使大家马上能理解看什么、怎么看。拟物化的方式使图标变得更友好更<code>人性化</code>，正确使用可以提升用户体验。</p>
<p>仪表盘的圆形结构，可以更有效的<code>利用空间</code>。</p>
<p>为了视觉上的不拥挤且符合常识，我们建议指针的数量不超过 <strong>3</strong> 根。</p>
<div class="clearfix"></div>

<h2 id="仪表盘的构成">仪表盘的构成</h2><table class="struct-table">
  <tr>
    <th>图表类型</th>
    <th>仪表盘</th>
  </tr>
  <tr>
    <td>适合的数据</td>
    <td>一个分类字段，一个连续字段</td>
  </tr>
  <tr>
    <td>功能</td>
    <td>
      <code>对比</code>分类字段对应的数值大小
    </td>
  </tr>
  <tr>
    <td>数据与图形的映射</td>
    <td>
      指针映射到分类字段，指针的角度映射连续字段
    </td>
  </tr>
  <tr>
    <td>适合的数据条数</td>
    <td>小于等于3</td>
  </tr>
</table>

<div id="c1" style="float: right"></div>
<div class="code hide">

  var data = [
    {name: '指针',value: 30, length: 10},
  ];
  var chart = new G2.Chart({
    id : 'c1',
    width: 400,
    height : 284,
    plotCfg: {
      margin: [50]
    }
  });
  chart.coord('gauge',{
    startAngle: -1 * Math.PI,
    endAngle: 0
  });
  chart.source(data);
  chart.legend('length',false);
  chart.axis('value',{subTick: 5, grid: false});
  chart.col('value',{type: 'linear',min: 0,max: 100, tickCount:8});
  chart.col('length',{type: 'linear',min: 0,max: 10});
  chart.point().position('value').shape('pointerArrow').size('length').color('#999');

  chart.guide().arc([0,1],[100,1],{
      stroke: '#22B07B',
      'stroke-width':12,
      'stroke-opacity': 0.7
    });

  chart.render();

</div>

<div class="clearfix"></div>

<h2 id="仪表盘的应用场景">仪表盘的应用场景</h2><h3 id="适合仪表盘的场景">适合仪表盘的场景</h3><h4 id="时钟-amp-表">时钟&amp;表</h4><ul>
<li>图表说明：与普通仪表盘相比，该种图表坐标轴的首尾相连</li>
<li>场景说明：钟表</li>
<li>数据说明：有3维度，分类数据表示秒针、分针、时针，时间数值数据映射指针角度，长度数值数据映射表针大小</li>
</ul>
<table>
<thead>
<tr>
<th>时针</th>
<th>分针</th>
<th>秒针</th>
</tr>
</thead>
<tbody>
<tr>
<td>0～24</td>
<td>0～60</td>
<td>0～60</td>
</tr>
</tbody>
</table>
<div id="c2"></div>

<div class="code unvisiable-hide">
$(function(){
      var Shape = G2.Shape;
      var Vector = G2.Canvas.Matrix.Vector2;
      // 自定义Shape 部分
      Shape.registShape('point', 'clock', {
        drawShape: function(cfg, group){
          var point; // 针尖点
          var point1; // 针尾点1
          var point2; // 针尾点2
          var center;
          var shape;
          var r; // 中心点半径
          var v1; // 指针向量
          var v2; // 与指针垂直向量
          var vstash;
          point = cfg.points[0];
          point.y = cfg.size;
          point = this.parsePoint(point);
          center = this.parsePoint({
            x: 0,
            y: 0
          });
          r = 20 * (1-cfg.size);
          v1 = Vector.sub(point, center);
          v2 = v1.vertical();
          shape = group.addShape('circle', {
            attrs: {
              x: center.x,
              y: center.y,
              r: r/1.3,
              fill: cfg.color
            }
          });
          // v2.negate();
          v2.setLength(r/2);
          point1 = Vector.add(v2, center);
          point2 = Vector.add({
            x: -v2.x,
            y: -v2.y
          }, center);
          shape = group.addShape('polygon', {
            attrs: {
              points: [
                [point1.x, point1.y],
                [point2.x, point2.y],
                [point.x, point.y]
              ],
              lineWidth: 2,
              arrow: true,
              fill: cfg.color
            }
          });
          return shape;
        }
      });
      // G2 语法部分
      var color = ['#18B7D6', '#EFCF6E', '#E47668'];
      var chart = new G2.Chart({
        id : 'c2',
        forceFit: true,
        height: 500,
        plotCfg: {
          margin: 50
        }
      });
      chart.legend(false);
      chart.tooltip(false);
      chart.source(getData(),{
        'value': {type: 'linear',min: 0,max: 12, tickCount:12}
      });
      chart.coord('clock');
      chart.axis('value', {
        labels: {
          label: {
            fontSize: 14
          },
          autoRotate: false
        },
        line: {
          stroke: "#ccc"
        },
        tickLine: {
          stroke: "#333",
          value: -10
        },
        labelOffset: -12
      });
      chart.point()
        .position('value')
        .size('length',0.8, 0.4)
        .color('name', ['#333333', '#333333', '#CC0000'])
        .shape('clock');
      chart.render();
      function getData(){
        var date = new Date();
        var data = [
          {name: 'hour', value: date.getHours(), length: 5},
          {name: 'minute', value: date.getMinutes()*12/60, length: 9},
          {name: 'second', value: date.getSeconds()*12/60, length: 10}
        ];
        return data;
      }
      setInterval(function(){
        chart.changeData(getData());
      }, 1000);
});
</div>

<h4 id="投资收益率">投资收益率</h4><ul>
<li>场景说明：下图是蚂蚁金服某金融产品的投资收益率</li>
<li>数据说明：有1维度，收益率数值数据映射指针角度</li>
</ul>
<div id="c3"></div>

<div class="code unvisiable-hide">
      var Shape = G2.Shape;
      // 自定义Shape 部分
      Shape.registShape('point', 'dashBoard', {
        drawShape: function(cfg, group){
          var origin = cfg.origin; // 原始数据
          var value = origin.value;
          var point = cfg.points[0]; // 获取第一个标记点
          point = this.parsePoint({ // 将标记点转换到画布坐标
            x: point.x,
            y: 0.95
          });
          var center = this.parsePoint({ // 获取极坐标系下画布中心点
            x: 0,
            y: 0
          });
          var r = 20;
          var ra = 0.8 * r;
          var X1 = center.x;
          var Y1 = center.y;
          var X2 = point.x;
          var Y2 = point.y;
          var B = 150/180;
          var Xa,Xb,Xc,Ya,Yb,Yc; // 绘制小箭头需要的三个点
          var shape;
          if (Y1==Y2) {
            if(X1>X2){
              Xa = X2 + Math.cos(B)* ra;
              Ya = Y2 - Math.sin(B)* ra;
              Xb = X2 + Math.cos(B)* ra;
              Yb = Y2 + Math.sin(B)* ra;
              Xc = X2 + 2 * ra;
              Yc = Y2;
            }else{
              Xa = X2 - Math.cos(B)* ra;
              Ya = Y2 - Math.sin(B)* ra;
              Xb = X2 - Math.cos(B)* ra;
              Yb = Y2 + Math.sin(B)* ra;
              Xc = X2 - 2 * ra;
              Yc = Y2;
            }
          }else if(Y1>Y2){
            var A = Math.atan((X1 - X2) / (Y1 - Y2));
            Xa = X2 + ra * Math.sin(A + B);
            Ya = Y2 + ra * Math.cos(A + B);
            Xb = X2 + ra * Math.sin(A - B);
            Yb = Y2 + ra * Math.cos(A - B);
            Xc = X2 + 2 * ra * Math.sin(A);
            Yc = Y2 + 2 * ra * Math.cos(A);
          }else{
            if(X1>X2){
              var A = Math.atan((Y2 - Y1) / (X1 - X2));
              Xa = X2 + ra * Math.cos(A + B);
              Ya = Y2 - ra * Math.sin(A + B);
              Xb = X2 + ra * Math.cos(A - B);
              Yb = Y2 - ra * Math.sin(A - B);
              Xc = X2 + 2 * ra * Math.cos(A);
              Yc = Y2 - 2 * ra * Math.sin(A);
            }else{
              var A = Math.atan((Y2 - Y1) / (X2 - X1));
              Xa = X2 - ra * Math.cos(A - B);
              Ya = Y2 - ra * Math.sin(A - B);
              Xb = X2 - ra * Math.cos(A + B);
              Yb = Y2 - ra * Math.sin(A + B);
              Xc = X2 - 2 * ra * Math.cos(A);
              Yc = Y2 - 2 * ra * Math.sin(A);
            }
          }
          shape = group.addShape('circle', {
            attrs:{
              x: X2,
              y: Y2,
              r: r,
              fill: cfg.color
            }
          });
          group.addShape('circle', {
            attrs:{
              x: X2,
              y: Y2,
              r: r/2,
              fill: 'white'
            }
          });
          // 添加文本1
          group.addShape('text', {
            attrs: {
              x: X1,
              y: Y1-25,
              text: '当前收益率',
              fontSize: 32,
              fill: '#CCCCCC',
              textAlign: 'center'
            }
          });
          // 添加文本2
          group.addShape('text', {
            attrs: {
              x: X1,
              y: Y1+25,
              text: value,
              fontSize: 32,
              fill: '#F75B5B',
              textAlign: 'center'
            }
          });
          group.addShape('polygon', {
            attrs: {
              points: [
                [Xa, Ya],
                [Xc, Yc],
                [Xb, Yb],
                [Xa, Ya]
              ],
              fill: cfg.color
            }
          });
          return shape;
        }
      });
      // G2 语法部分
      var color = ['#18B7D6', '#EFCF6E', '#E47668'];
      var chart = new G2.Chart({
        id : 'c3',
        forceFit: true,
        height: 500,
        plotCfg: {
          margin: 100
        }
      });
      chart.source(creatData());
      chart.coord('gauge', {
        startAngle: -9/8 * Math.PI,
        endAngle: 1/8 * Math.PI
      });
      chart.col('value', {
        min: 0,
        max: 0.15,
        tickInterval: 0.075
      });
      chart.axis('value', {
        tickLine: {
          stroke: '#EEEEEE'
        },
        labelOffset: -26
      });
      chart.point().position('value').shape('dashBoard').color('value', function(v){ // 根据值的大小确定标记的颜色
        var rst;
        if ( v < 0.05 ) {
          rst = color[0];
        } else if ( v < 0.1 ){
          rst = color[1];
        } else {
          rst = color[2];
        }
        return rst;
      });
      chart.legend(false);
      draw(creatData());
      function draw(data) {
        var val = data[0].value;
        var lineWidth = 30;
        chart.guide().clear();
        chart.guide().arc([0, 0.95],[0.15, 0.95],{ // 底灰色
          stroke: '#CCCCCC',
          lineWidth: lineWidth
        });
        val > 0.05 && chart.guide().arc([0, 0.95],[0.05, 0.95],{ // 低收益率
          stroke: color[0],
          lineWidth: lineWidth
        });
        val > 0.1 && chart.guide().arc([0.05, 0.95],[0.1, 0.95],{ // 中收益率
          stroke: color[1],
          lineWidth: lineWidth
        });
        val > 0 && val <= 0.05 && chart.guide().arc([0, 0.95],[val, 0.95],{ // 低收益率
          stroke: color[0],
          lineWidth: lineWidth
        });
        val > 0.05 && val <= 0.1 && chart.guide().arc([0.05, 0.95],[val, 0.95],{ // 中收益率
          stroke: color[1],
          lineWidth: lineWidth
        });
        val > 0.1 && val <= 0.15 && chart.guide().arc([0.1, 0.95],[val, 0.95],{ // 中收益率
          stroke: color[2],
          lineWidth: lineWidth
        });
        chart.changeData(data);
      }
      function creatData(){
        var data = [];
        var val = 0.13;
        val = val.toFixed(3);
        data.push({value: Number(val)});
        return data;
      }
</div>

      <h2 id="标签">标签</h2>
      <div>

        <ul class="vis-classify-list small clearfix">
          <li>
            <a href="../../../../vis/doc/chart/classify/range.html">
              <span>区间类</span>
            </a>
          </li>
        </ul>

      </div>
    </div>
  </div>
  <script type="text/javascript">
    $.fn.isOnScreen = function(){
      var win = $(window);
      var viewport = {
          top : win.scrollTop(),
          left : win.scrollLeft()
      };
      viewport.right = viewport.left + win.width();
      viewport.bottom = viewport.top + win.height();
      var bounds = this.offset();
      bounds.right = bounds.left + this.outerWidth();
      bounds.bottom = bounds.top + this.outerHeight();
      return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
    };
    function ReplaceAll(str, sptr, sptr1){
      while (str.indexOf(sptr) >= 0){
         str = str.replace(sptr, sptr1);
      }
      return str;
    }
    function lazyLoad(codes) {
      var isrun = [];
      tryRun();
      $(document).on('mousewheel',function(e){
        tryRun();
      });
      function tryRun(){
        codes.each(function(index,ele){
          if (isrun.indexOf(ele) === -1) {
            var $ele = $(ele);
            if ( $ele.isOnScreen() ) {
              setTimeout(function(){
                var t = $ele.html();
                t = ReplaceAll(t, '&lt;', '<');
                t = ReplaceAll(t, '&gt;', '>');
                t = ReplaceAll(t, '&amp;', '&');
                eval(t);
                $ele.hide();
              },500);
              isrun.push(ele);
            };
          };
        });
      }
    }
    var codes = $('.code');
    lazyLoad(codes);
  </script>

  </div>
 
  <div style="display:none;">
<script src="https://s11.cnzz.com/z_stat.php?id=1259109662&web_id=1259109662" language="JavaScript"></script>
<script src="https://a.alipayobjects.com/g/component/tracert/1.0.0/index.js"></script>
</div>
</body>
</html>