<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>色块图</title>
  <meta name="keywords" content="G2, The Grammar of Graphics, 图形语法,图表绘制引擎,图表库,可视化,数据可视化,AntV,Data Visualization,visualization,visualisation, antd, ant, ant design, G6, 流程图, 关系图, 可视化规范, 地图, 河流图, 力导图, 网络图, UML图, 流图, 时序图, 图">
  <meta name="description" content="一套专业、简单、无限可能的可视化解决方案">
  <link rel="icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="shortcut icon" href="https://zos.alipayobjects.com/rmsportal/oNtwPuEICFyCWUHztcOA.png" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="../../../../static/style.css" />
  <link rel="stylesheet" type="text/css" href="../../../../static/codemirror.css" />
  <link rel="stylesheet" type="text/css" href="../../../../static/tipuesearch/tipuesearch.css" >
  <script src="../../../../static/jquery.js"></script>
  <script src="../../../../static/tipuesearch/tipuesearch_set.js"></script>
  <script src="../../../../static/tipuesearch/tipuesearch.js"></script>
  <script src="https://g.alicdn.com/bui/??seajs/2.3.0/sea.js"></script>
  <script src="https://g.alicdn.com/bui/bui/1.1.17/config.js"></script>
  <script src="../../../../static/script.js"></script>
<script src="https://gw.alipayobjects.com/as/g/datavis/g2/2.3.13/index.js"></script>
</head>
<body><header id="header">
  <div class="nav-wrapper gradient-line">
    <div class="nav-content clearfix">
      <div class="pull-left">
        <a href="/index.html" class="nav-logo">
          <img src="https://zos.alipayobjects.com/rmsportal/aGpKpuxoGfZqJobMPLvj.svg">
          <span class="logo-text">AntV</span>
        </a>
        <div class="search-box">
          <form action="/search.html">
            <i class="iconfont icon-search"></i>
            <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
          </form>
        </div>
      </div>
      <div class="nav pull-right">
        <ul id="J_nav" class="clearfix nav-list">
          <li id="g2" class="nav-item">
            <a class="nav-item-link" href="/g2/doc/index.html">G2</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g2/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g2/doc/tutorial/start/index.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g2/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g2/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g2/doc/history.html">更新日志</a></li>
            </ul>
          </li>
          <li id="g2-mobile" class="nav-item">
            <a class="nav-item-link" href="/g2-mobile/doc/index.html">G2-mobile</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g2-mobile/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/doc/tutorial/shape.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g2-mobile/doc/history.html">更新日志</a></li>
            </ul>
          </li>
          <li id="g6" class="nav-item">
            <a class="nav-item-link" href="/g6/doc/index.html">G6</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/g6/doc/index.html">快速上手</a></li>
              <li class="nav-sub-item"><a href="/g6/doc/tutorial/start/base.html">使用教程</a></li>
              <li class="nav-sub-item"><a href="/g6/demo/index.html">图表示例</a></li>
              <li class="nav-sub-item"><a href="/g6/api/index.html">API</a></li>
              <li class="nav-sub-item"><a href="/g6/doc/history.html">更新日志</a></li>
              <li class="nav-sub-item"><a href="/g6/tools/index.html" target="_blank">在线工具</a></li>
            </ul>
          </li>
          <li id="vis" class="nav-item hover last">
            <a class="nav-item-link" href="/vis/doc/chart/index.html">可视化基础</a>
            <ul class="nav-sub-list fadeUp">
              <li class="nav-sub-item"><a href="/vis/doc/chart/classify/compare.html">图表用法</a></li>
              <li class="nav-sub-item"><a href="/vis/doc/design/index.html">图表设计指引</a></li>
              <li class="nav-sub-item"><a href="/vis/doc/reference.html">经典文献</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
 
 

  <div class="main-container clearfix">
  <div class="doc-content vis-chart">
    <div class="doc-inner vis-chart">
      <h1>色块图</h1>
      <p><img src="https://os.alipayobjects.com/rmsportal/dCgVzFLjenQsgWT.png" width="350px" /></p>
<h2 id="色块图的简介">色块图的简介</h2><p>色块图，由小色块<code>有序</code>且<code>紧凑</code>的组成的图表。色块图的最大好处是，2维画布上的空间利用率<code>非常</code>高。理论上小色块的大小是可以等于硬件像素的大小。想象一下，如果用每个像素直接编码数值，一块200px*200px的小屏幕，也可以最多编码40000子项！</p>
<p>所以色块图特别适合用于直接对数据量较大的、相对原始的数据进行分析。比如：生物基因科学领域，色块图常被用于微阵列数据分析。</p>
<p>另外，关于颜色的用法有两点需要强调一下：</p>
<ol>
<li>如果是应对展示用的场景，数据量不大、颜色分类数量小于或等于<code>7</code>个，可以采用分类的颜色映射。</li>
<li>如果应对，分析相关的需求，为了更有效率的使用色块图，我们建议使用连续（渐变）的颜色映射数值。由于人眼对颜色的分辨力有限，所以用于编码的颜色不宜过多，我们推荐的颜色的数量在<code>3～11</code>个之间。</li>
</ol>
<p>英文：color map</p>
<h2 id="色块图的构成">色块图的构成</h2><p><img src="https://os.alipayobjects.com/rmsportal/nbdQjrGfLveruGA.png" class="constitute-img"/></p>
<table class="struct-table">
  <tr>
    <th>图表类型</th>
    <th>色块图</th>
  </tr>
  <tr>
    <td>适合的数据</td>
    <td>两个分类字段，一个连续字段</td>
  </tr>
  <tr>
    <td>功能</td>
    <td>
    <code>对比</code>两个分类字段对应的数值大小
    </br>
    展示两个分类字段对应的数值<code>分布</code>
    </td>
  </tr>
  <tr>
    <td>数据与图形的映射</td>
    <td>两个分类数据字段分别映射到横轴和纵轴，一个数值或分类字段映射到颜色。</td>
  </tr>
  <tr>
    <td>适合的数据条数</td>
    <td>超过30条数据，不超过区域所含屏幕像素个数的数据量</td>
  </tr>
</table>

<h2 id="色块图的应用场景">色块图的应用场景</h2><h3 id="适合的场景">适合的场景</h3><p>例子1: <strong>适合应用到数据展示。</strong>下图是模拟的杭州地铁票价图。</p>
<div id='c1'></div>

<div class="code hide">
    var sites =
    ["湘湖", "滨康路", "西兴", "滨和路", "江陵路", "近江", "婺江路", "城站", "定安路", "龙翔桥", "凤起路", "武林广场", "西湖文化广场", "打铁关", "火车东站", "闸弄口", "彭埠", "七堡", "九和路", "九堡", "客运中心", "下沙西", "金沙湖", "高沙路", "文泽路"];

    var data = [];

    for(var i = 0; i < sites.length; i ++){
      for(j = sites.length - 1; j >=i; j--){
        var price = 0;
        var step = Math.abs(j - i);
        if (step <= 2) {
          price = 2;
        } else if (step <= 4) {
          price = 3;
        } else if (step <= 7) {
          price = 4;
        } else if (step <= 13) {
          price = 5;
        } else if (step <= 16) {
          price = 6;
        } else if (step <= 21) {
          price = 7;
        } else {
          price = 8;
        }
        var obj = {from: sites[i],to: sites[j],price: price};
        data.push(obj);
      }
    }


    var Stat = G2.Stat;
    var Frame = G2.Frame;

    var chart = new G2.Chart({
      id: 'c1',
      forceFit: true,
      height: 500,
      plotCfg: {
        margin: [10,50,70,100]
      }
    });

    var defs = {
      'from': {
        values: sites
      },
      'to': {
        values: sites.slice(0).reverse()
      }
    };
    //chart.coord().transpose();
    chart.axis('to',{
      title: null,
      grid: null,
      tickLine: null
    });
    chart.axis('from',false);
    chart.source(data,defs);
    chart.polygon().position('from*to')
          .shape('stroke')
          .color('price')
          .label('price');//.label('count',{offset: -1});

    // 在上面添加文本
    for (var i = 0; i < sites.length - 2; i ++) {
      var site = sites[i];
      var nextSite = sites[i + 1];
      chart.guide().text([nextSite,site],nextSite);
    }
    chart.render();
</div>

<p>说明：</p>
<ul>
<li>站名映射到了<code>x</code>、<code>y</code>轴，以确定<code>位置</code></li>
<li>票价映射到<code>颜色</code></li>
<li>票价数据是模拟的，仅表示大概情况</li>
</ul>
<p>例子2: <strong>适合应用到简单的数据分析。</strong>2015年，全年股指的波动情况。</p>
<div id='c2'></div>

<div class="code hide">
$.getJSON('./data/tape.json',function(data){
  var Stat = G2.Stat;
        var Frame = G2.Frame;
        var chart = new G2.Chart({
          id: 'c2',
          forceFit: true,
          height: 500,
          plotCfg: {
            margin: [20, 120]
          }
        });
        // 获取当前月的第几周,从 0 开始
        function getMonthWeek(date) {
          var year = date.getFullYear();
          var month = date.getMonth();
          var monthFirst = new Date(year, month, 0);
          var intervalDays = Math.round((date.getTime() - monthFirst.getTime()) / 86400000);
          var index = Math.round((intervalDays + monthFirst.getDay()) / 7);
          return index;
        }
        // 加工数据
        // 增加涨幅、跌幅
        // 添加所属月、周几、每个月的第几周
        data.forEach(function(obj) {
          var date = new Date(obj['日期']);
          var month = date.getMonth();
          obj.month = month;
          obj.day = date.getDay();
          obj.week = getMonthWeek(date).toString();
        });
        // 对数据进行排序
        var Frame = G2.Frame;
        var frame = new Frame(data);
        frame = Frame.sort(frame, 'day');
        var defs = {
          month: {
            type: 'cat',
            values: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", 'December']
          },
          day: {
            type: 'cat'
          },
          week: {
            type: 'cat',
            values: ['5', '4', '3', '2', '1', '0']
          },
          '涨跌幅': {
            type: 'linear',
            min: -10,
            max: 10
          },
          time: {
            type: 'time'
          }
        };
        chart.axis(false);
        chart.col('日期', {
          type: 'time'
        });
        chart.tooltip({
          map: {
            title: '日期'
          }
        });
        chart.legend('涨跌幅', {
          position: 'left'
        });
        chart.source(frame, defs);
        chart.facet(['month'], {
          type: 'list',
          cols: 3,
          margin: 30,
          facetTitle: {
            titleOffset: 3,
            colTitle: {
              title: {
                fontSize: 14,
                textAlign: 'center',
                fill: '#000'
              }
            }
          }
        });
        chart.polygon().position('day*week*日期')
          .color('涨跌幅', '#006837-#ffffbf-#d73027')
          .style({
          lineWidth: 1,
          stroke: '#999'
        });
        chart.render();
});
</div>

<p>说明：</p>
<ul>
<li>将某月<code>星期几</code>映射到<code>x</code>轴，<code>第几个星期</code>映射到<code>y</code>轴</li>
<li>股指映射到<code>颜色</code>，从绿到黄到红，表示股指从低到高</li>
<li>对<code>月份</code>进行分面</li>
</ul>
<p>例子3: <strong>适合应用到聚类分析</strong>。下图是用于基因芯片的聚类分析的<code>分群色块图</code></p>
<p><img src="https://os.alipayobjects.com/rmsportal/KuYPevLQPaKCwUQ.png" width="600px"></p>
<p>说明：（令x轴基因片段为A组，y轴基因片段为B组）</p>
<ul>
<li>将A组基因名，映射到<code>x</code>轴，将B组基因名，映射到<code>y</code>轴</li>
<li>将A组基因表达程度映射为<code>红色</code>，B组程度基因表达映射为<code>绿色</code>，基因的表达程度映射为<code>亮度和饱和度</code></li>
<li>通过算法将相似度高的基因分组，将关系画成树图</li>
</ul>
<h2 id="色块图与其他图表的对比">色块图与其他图表的对比</h2><h3 id="色块图和热力图">色块图和<a href="heatmap.html">热力图</a></h3><ul>
<li>数据类型上看：热力图是用两个<code>连续</code>字段确定数值点的位置，色块图是用两个<code>分类</code>字段确定数值点的位置。</li>
<li>功能上看：热力图主要用于展示数据的<code>分布</code>情况，色块图在观察数据分布以外，还能进行<code>列对比</code>和<code>行对比</code>。</li>
</ul>

      <h2 id="标签">标签</h2>
      <div>

        <ul class="vis-classify-list small clearfix">
          <li>
            <a href="../../../../vis/doc/chart/classify/compare.html">
              <span>比较类</span>
            </a>
          </li>
          <li>
            <a href="../../../../vis/doc/chart/classify/distribute.html">
              <span>分布类</span>
            </a>
          </li>
        </ul>

      </div>
    </div>
  </div>
  <script type="text/javascript">
    $.fn.isOnScreen = function(){
      var win = $(window);
      var viewport = {
          top : win.scrollTop(),
          left : win.scrollLeft()
      };
      viewport.right = viewport.left + win.width();
      viewport.bottom = viewport.top + win.height();
      var bounds = this.offset();
      bounds.right = bounds.left + this.outerWidth();
      bounds.bottom = bounds.top + this.outerHeight();
      return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
    };
    function ReplaceAll(str, sptr, sptr1){
      while (str.indexOf(sptr) >= 0){
         str = str.replace(sptr, sptr1);
      }
      return str;
    }
    function lazyLoad(codes) {
      var isrun = [];
      tryRun();
      $(document).on('mousewheel',function(e){
        tryRun();
      });
      function tryRun(){
        codes.each(function(index,ele){
          if (isrun.indexOf(ele) === -1) {
            var $ele = $(ele);
            if ( $ele.isOnScreen() ) {
              setTimeout(function(){
                var t = $ele.html();
                t = ReplaceAll(t, '&lt;', '<');
                t = ReplaceAll(t, '&gt;', '>');
                t = ReplaceAll(t, '&amp;', '&');
                eval(t);
                $ele.hide();
              },500);
              isrun.push(ele);
            };
          };
        });
      }
    }
    var codes = $('.code');
    lazyLoad(codes);
  </script>

  </div>
 
  <div style="display:none;">
<script src="https://s11.cnzz.com/z_stat.php?id=1259109662&web_id=1259109662" language="JavaScript"></script>
<script src="https://a.alipayobjects.com/g/component/tracert/1.0.0/index.js"></script>
</div>
</body>
</html>